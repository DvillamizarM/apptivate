{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\dani1\\\\Desktop\\\\apptivate\\\\src\\\\components\\\\cards\\\\ExerciseRoutine.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport firebase from \"../../../database/firebase\";\nimport Download from \"@expo/vector-icons/Ionicons\";\nimport MaterialIcons from \"@expo/vector-icons/MaterialIcons\";\n\nvar _require = require(\"react-native-expo-viewport-units\"),\n    vmin = _require.vmin;\n\nimport { connect } from \"react-redux\";\nimport { actionsDownload } from \"../../redux/actions/actionsDownload\";\nimport * as FileSystem from \"expo-file-system\";\nimport ChargeScreen from \"../Simple/ChargeScreen\";\n\nvar ExerciseRoutine = function ExerciseRoutine(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      information = _useState2[0],\n      setInformation = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      CurrentInformation = _useState4[0],\n      setCurrentInformation = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      exists = _useState8[0],\n      setExistence = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      pending = _useState10[0],\n      setPending = _useState10[1];\n\n  var protocol = [{\n    title: \"Fase Preprotésica\",\n    key: \"preprotesico\"\n  }, {\n    title: \"Fase Protésica\",\n    key: \"protesico\"\n  }];\n\n  var getProtocol = function getProtocol() {\n    var list;\n    return _regeneratorRuntime.async(function getProtocol$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            list = [];\n\n            if (!(information.length !== 14)) {\n              _context3.next = 6;\n              break;\n            }\n\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(firebase.db.collection(\"protocol\").doc(\"protesico\").get().then(function (element) {\n              var data = element.data();\n              Object.values(data).map(function _callee2(element) {\n                var info, temp, promises, finished;\n                return _regeneratorRuntime.async(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        info = [];\n                        temp = {};\n                        temp[\"title\"] = element.title;\n                        temp[\"phase\"] = element.phase;\n                        temp[\"setup\"] = element.setup;\n                        promises = element.refs.map(function _callee(ref, index) {\n                          return _regeneratorRuntime.async(function _callee$(_context) {\n                            while (1) {\n                              switch (_context.prev = _context.next) {\n                                case 0:\n                                  _context.next = 2;\n                                  return _regeneratorRuntime.awrap(ref.get().then(function (res) {\n                                    return info.push(res.data());\n                                  }));\n\n                                case 2:\n                                  return _context.abrupt(\"return\", info);\n\n                                case 3:\n                                case \"end\":\n                                  return _context.stop();\n                              }\n                            }\n                          }, null, null, null, Promise);\n                        });\n                        _context2.next = 8;\n                        return _regeneratorRuntime.awrap(Promise.all(promises));\n\n                      case 8:\n                        finished = _context2.sent;\n                        console.warn(\"finished---\", finished);\n                        temp[\"exercises\"] = finished;\n                        list.push(temp);\n\n                        if (!(list.length === element.refs.length)) {\n                          _context2.next = 14;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", list);\n\n                      case 14:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              });\n              console.warn(\"end then\");\n            }).catch(function (e) {\n              console.log(\"El error es \", e);\n            }));\n\n          case 4:\n            _context3.next = 9;\n            break;\n\n          case 6:\n            console.warn(\"lisr---\", list);\n            setInformation(list);\n            setLoading(false);\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var basicPhaseExercises = function basicPhaseExercises(exercises) {\n    var promises;\n    return _regeneratorRuntime.async(function basicPhaseExercises$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            promises = exercises.map(function _callee3(Item) {\n              var numItem;\n              return _regeneratorRuntime.async(function _callee3$(_context4) {\n                while (1) {\n                  switch (_context4.prev = _context4.next) {\n                    case 0:\n                      _context4.next = 2;\n                      return _regeneratorRuntime.awrap(Item.get());\n\n                    case 2:\n                      numItem = _context4.sent;\n                      return _context4.abrupt(\"return\", numItem);\n\n                    case 4:\n                    case \"end\":\n                      return _context4.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            });\n            return _context6.abrupt(\"return\", new Promise(function _callee4(resolve, reject) {\n              var numItems;\n              return _regeneratorRuntime.async(function _callee4$(_context5) {\n                while (1) {\n                  switch (_context5.prev = _context5.next) {\n                    case 0:\n                      _context5.next = 2;\n                      return _regeneratorRuntime.awrap(Promise.all(promises));\n\n                    case 2:\n                      numItems = _context5.sent;\n                      resolve(numItems.map(function (e) {\n                        return e.data();\n                      }));\n\n                    case 4:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getBasicData = function getBasicData() {\n    var dbRef;\n    return _regeneratorRuntime.async(function getBasicData$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            dbRef = firebase.db.collection(\"protocol\").doc(\"protesico\").collection(\"basic\");\n            return _context10.abrupt(\"return\", dbRef.get().then(function _callee7(querySnapshot) {\n              var promises, arrayBasicExercises, Array, promises2;\n              return _regeneratorRuntime.async(function _callee7$(_context9) {\n                while (1) {\n                  switch (_context9.prev = _context9.next) {\n                    case 0:\n                      promises = querySnapshot.docs.map(function _callee5(doc) {\n                        var ejerciciosXfase, res;\n                        return _regeneratorRuntime.async(function _callee5$(_context7) {\n                          while (1) {\n                            switch (_context7.prev = _context7.next) {\n                              case 0:\n                                ejerciciosXfase = Object.values(doc.data());\n                                res = basicPhaseExercises(ejerciciosXfase);\n                                return _context7.abrupt(\"return\", res);\n\n                              case 3:\n                              case \"end\":\n                                return _context7.stop();\n                            }\n                          }\n                        }, null, null, null, Promise);\n                      });\n                      _context9.next = 3;\n                      return _regeneratorRuntime.awrap(Promise.all(promises));\n\n                    case 3:\n                      arrayBasicExercises = _context9.sent;\n                      Array = [];\n                      promises2 = querySnapshot.docs.map(function _callee6(doc, i) {\n                        return _regeneratorRuntime.async(function _callee6$(_context8) {\n                          while (1) {\n                            switch (_context8.prev = _context8.next) {\n                              case 0:\n                                Array.push({\n                                  title1: doc.id == \"cooldown\" ? \"Enfriamiento\" : doc.id == \"stretch\" ? \"Estiramiento\" : \"Calentamiento\",\n                                  collection: [{\n                                    title2: \"\",\n                                    exerciseCollection: arrayBasicExercises[i].map(function (e, j) {\n                                      return {\n                                        day: \"Ejercicio \" + (j - -1),\n                                        time: e.activeTime || \"\",\n                                        multimedia: e.gif,\n                                        materials: e.materials || false,\n                                        data: _objectSpread({}, e)\n                                      };\n                                    })\n                                  }]\n                                });\n\n                              case 1:\n                              case \"end\":\n                                return _context8.stop();\n                            }\n                          }\n                        }, null, null, null, Promise);\n                      });\n                      return _context9.abrupt(\"return\", Array);\n\n                    case 7:\n                    case \"end\":\n                      return _context9.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getInformationWeeks = function getInformationWeeks() {\n    var Array, array2, ArraySetup, index, dbRef, res2, ejerciciosXfase, res, refSetup, getSetup, setupValues, map2;\n    return _regeneratorRuntime.async(function getInformationWeeks$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            Array = [];\n            array2 = [];\n            ArraySetup = [];\n            index = 0;\n\n          case 4:\n            if (!(index < 1)) {\n              _context11.next = 23;\n              break;\n            }\n\n            dbRef = firebase.db.collection(\"protocol\").doc(\"protesico\").collection(\"week\" + (index + 1)).doc(\"active\");\n            _context11.next = 8;\n            return _regeneratorRuntime.awrap(dbRef.get());\n\n          case 8:\n            res2 = _context11.sent;\n            ejerciciosXfase = Object.values(res2.data());\n            _context11.next = 12;\n            return _regeneratorRuntime.awrap(basicPhaseExercises(ejerciciosXfase));\n\n          case 12:\n            res = _context11.sent;\n            array2.push(res);\n            refSetup = firebase.db.collection(\"protocol\").doc(\"protesico\").collection(\"week\" + (index + 1)).doc(\"setup\");\n            _context11.next = 17;\n            return _regeneratorRuntime.awrap(refSetup.get());\n\n          case 17:\n            getSetup = _context11.sent;\n            setupValues = getSetup.data();\n            ArraySetup.push(setupValues);\n\n          case 20:\n            index++;\n            _context11.next = 4;\n            break;\n\n          case 23:\n            map2 = array2.map(function (element, index) {\n              Array.push({\n                title1: index <= 3 ? \"Fase inicial\" : \"Fase intermedia\",\n                collection: [{\n                  title2: \"Semana \" + index + 1,\n                  exerciseCollection: element.map(function (e, j) {\n                    return {\n                      day: \"Ejercicio \" + (j - -1),\n                      time: e.activeTime || \"\",\n                      multimedia: e.gif,\n                      materials: e.materials || false,\n                      data: _objectSpread(_objectSpread({}, e), ArraySetup[j])\n                    };\n                  })\n                }]\n              });\n            });\n            return _context11.abrupt(\"return\", Array);\n\n          case 25:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getUrls = function getUrls(items) {\n    var urlList = [];\n    items.forEach(function (element) {\n      urlList.push(element.multimedia);\n    });\n    return urlList;\n  };\n\n  var getAudioUrls = function getAudioUrls(items) {\n    var urlList = [];\n    items.forEach(function (element) {\n      console.warn(\"voz====\", items);\n      urlList.push(element.data.voz);\n    });\n    return urlList;\n  };\n\n  var getExercises = function getExercises() {\n    var basic, weeks, ordenado, ordenado2;\n    return _regeneratorRuntime.async(function getExercises$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            if (!(props.connection && information[0] === undefined)) {\n              _context12.next = 16;\n              break;\n            }\n\n            _context12.next = 3;\n            return _regeneratorRuntime.awrap(getBasicData());\n\n          case 3:\n            basic = _context12.sent;\n            _context12.next = 6;\n            return _regeneratorRuntime.awrap(getInformationWeeks());\n\n          case 6:\n            weeks = _context12.sent;\n            ordenado = [];\n            ordenado[0] = basic[2];\n            ordenado[1] = basic[1];\n            ordenado2 = ordenado.concat(weeks);\n            ordenado2.push(basic[0]);\n            setInformation(ordenado2);\n            setLoading(false);\n            _context12.next = 18;\n            break;\n\n          case 16:\n            setInformation(props.ExerciseRoutine);\n            setLoading(false);\n\n          case 18:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    var mounted = true;\n\n    if (mounted) {\n      getProtocol();\n    }\n\n    return function () {\n      mounted = false;\n    };\n  }, []);\n\n  var NavigationButton = function NavigationButton() {\n    return React.createElement(View, {\n      style: navigationStyles.containerNavigationButton,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 7\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        if (CurrentInformation - 1 >= 0) {\n          setCurrentInformation(CurrentInformation - 1);\n        } else if (CurrentInformation === 0) {\n          setCurrentInformation(1);\n        }\n      },\n      style: navigationStyles.sideButton,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: [navigationStyles.whiteText, {\n        fontSize: vmin(5)\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }\n    }, \"<\")), React.createElement(View, {\n      style: navigationStyles.navigationButtonText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: navigationStyles.whiteText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }\n    }, protocol[CurrentInformation].title)), React.createElement(TouchableOpacity, {\n      style: navigationStyles.sideButton,\n      onPress: function onPress() {\n        if (CurrentInformation + 1 < protocol.length) {\n          setCurrentInformation(CurrentInformation + 1);\n        } else if (CurrentInformation === 1) {\n          setCurrentInformation(0);\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: [navigationStyles.whiteText, {\n        fontSize: vmin(5)\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }\n    }, \">\")));\n  };\n\n  var downloadSection = function downloadSection(_ref) {\n    var sectionIndex, title, urls, audioUrls, items, sectionToSave;\n    return _regeneratorRuntime.async(function downloadSection$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            sectionIndex = _ref.sectionIndex, title = _ref.title;\n            urls = getUrls(information[sectionIndex].collection[0].exerciseCollection);\n            audioUrls = getAudioUrls(information[sectionIndex].collection[0].exerciseCollection);\n            items = _toConsumableArray(information);\n            console.warn(\"item---\", items);\n            _context14.next = 7;\n            return _regeneratorRuntime.awrap(Promise.all(urls.map(function _callee8(element, index) {\n              var fileUri, audioUri, downloadedFile, downloadedFile1, item;\n              return _regeneratorRuntime.async(function _callee8$(_context13) {\n                while (1) {\n                  switch (_context13.prev = _context13.next) {\n                    case 0:\n                      fileUri = \"\" + FileSystem.documentDirectory + (title + index);\n                      audioUri = \"\" + FileSystem.documentDirectory + (title + \"Audio\" + index);\n                      _context13.next = 4;\n                      return _regeneratorRuntime.awrap(FileSystem.downloadAsync(element, fileUri));\n\n                    case 4:\n                      downloadedFile = _context13.sent;\n\n                      if (!(audioUrls[index] !== \"cloudstorageID\")) {\n                        _context13.next = 9;\n                        break;\n                      }\n\n                      _context13.next = 8;\n                      return _regeneratorRuntime.awrap(FileSystem.downloadAsync(audioUrls[index], audioUri));\n\n                    case 8:\n                      downloadedFile1 = _context13.sent;\n\n                    case 9:\n                      console.warn(\"collection---\", items[sectionIndex].collection[0].exerciseCollection[index].data.series);\n                      item = _objectSpread(_objectSpread({}, items[sectionIndex].collection[0].exerciseCollection[index]), {}, {\n                        voz: audioUri,\n                        gif: fileUri,\n                        multimedia: fileUri,\n                        serie: items[sectionIndex].collection[0].exerciseCollection[index]\n                      });\n                      items[sectionIndex].collection[0].exerciseCollection[index] = item;\n                      setInformation(items);\n\n                    case 13:\n                    case \"end\":\n                      return _context13.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            })));\n\n          case 7:\n            if (!props.previusIdentifiers.includes(title)) {\n              sectionToSave = information[sectionIndex];\n              console.warn(\"section---\", information[sectionIndex]);\n              props.addItemToExerciseRoutine({\n                newExercise: sectionToSave,\n                title: title\n              });\n            }\n\n            setExistence(!exists);\n\n          case 9:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var deleteMultimedia = function deleteMultimedia(uri) {\n    return _regeneratorRuntime.async(function deleteMultimedia$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            _context15.prev = 0;\n            _context15.next = 3;\n            return _regeneratorRuntime.awrap(FileSystem.deleteAsync(FileSystem.documentDirectory + uri));\n\n          case 3:\n            _context15.next = 8;\n            break;\n\n          case 5:\n            _context15.prev = 5;\n            _context15.t0 = _context15[\"catch\"](0);\n            console.log(_context15.t0);\n\n          case 8:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  var deleteInformation = function deleteInformation(sectionIndex, title) {\n    var urls = getUrls(props.ExerciseRoutine[sectionIndex].collection[0].exerciseCollection);\n    urls.forEach(function _callee9(uri) {\n      var dlete;\n      return _regeneratorRuntime.async(function _callee9$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              _context16.next = 2;\n              return _regeneratorRuntime.awrap(deleteMultimedia(uri));\n\n            case 2:\n              dlete = _context16.sent;\n\n            case 3:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n    var urlsAudio = getAudioUrls(props.ExerciseRoutine[sectionIndex].collection[0].exerciseCollection);\n    urlsAudio.forEach(function _callee10(uri) {\n      var dlete;\n      return _regeneratorRuntime.async(function _callee10$(_context17) {\n        while (1) {\n          switch (_context17.prev = _context17.next) {\n            case 0:\n              _context17.next = 2;\n              return _regeneratorRuntime.awrap(deleteMultimedia(uri));\n\n            case 2:\n              dlete = _context17.sent;\n\n            case 3:\n            case \"end\":\n              return _context17.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n    props.deleteExercise(title);\n    setExistence(!exists);\n  };\n\n  var FirstSection = function FirstSection(info, sectionIndex) {\n    var title = info.phase !== \"\" ? info.phase : info.title;\n    console.log(\"info fisrt\", info.exercises);\n    var existsInDownloads = props.previusIdentifiers.includes(title);\n    var pendingDownload = 0;\n    return React.createElement(View, {\n      style: FirstSectionStyles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: FirstSectionStyles.rowContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: FirstSectionStyles.title,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }\n    }, title), React.createElement(View, {\n      style: FirstSectionStyles.iconContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }\n    }, existsInDownloads ? React.createElement(TouchableOpacity, {\n      style: FirstSectionStyles.downloadButton,\n      onPress: function onPress() {\n        Alert.alert(\"Eliminar \" + title, \"¿Está seguro que quiere eliminar la descarga de \" + title + \"?\", [{\n          text: \"Cancelar\",\n          style: \"cancel\"\n        }, {\n          text: \"Eliminar\",\n          onPress: function onPress() {\n            var dlete;\n            return _regeneratorRuntime.async(function onPress$(_context18) {\n              while (1) {\n                switch (_context18.prev = _context18.next) {\n                  case 0:\n                    _context18.next = 2;\n                    return _regeneratorRuntime.awrap(deleteInformation(sectionIndex, title));\n\n                  case 2:\n                    dlete = _context18.sent;\n\n                  case 3:\n                  case \"end\":\n                    return _context18.stop();\n                }\n              }\n            }, null, null, null, Promise);\n          }\n        }], {\n          cancelable: false\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"rgba(52, 152, 219, 1)\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 17\n      }\n    }, \"Descargado\"), React.createElement(MaterialIcons, {\n      name: \"file-download-done\",\n      size: vmin(7),\n      color: \"rgba(52, 152, 219, 1)\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 17\n      }\n    })) : !pending ? React.createElement(TouchableOpacity, {\n      onPress: function _callee11() {\n        return _regeneratorRuntime.async(function _callee11$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                Alert.alert(\"Descargar \" + title, \"¿Está seguro que quiere descargar \" + title + \"?\", [{\n                  text: \"Cancelar\",\n                  style: \"cancel\"\n                }, {\n                  text: \"Descargar\",\n                  onPress: function onPress() {\n                    var download;\n                    return _regeneratorRuntime.async(function onPress$(_context19) {\n                      while (1) {\n                        switch (_context19.prev = _context19.next) {\n                          case 0:\n                            setPending(true);\n                            _context19.next = 3;\n                            return _regeneratorRuntime.awrap(downloadSection({\n                              sectionIndex: sectionIndex,\n                              title: title\n                            }));\n\n                          case 3:\n                            download = _context19.sent;\n                            setPending(false);\n\n                          case 5:\n                          case \"end\":\n                            return _context19.stop();\n                        }\n                      }\n                    }, null, null, null, Promise);\n                  }\n                }], {\n                  cancelable: false\n                });\n\n              case 1:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      style: FirstSectionStyles.downloadButton,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"rgba(153, 153, 153, 1)\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 17\n      }\n    }, \"Descargar\"), React.createElement(Download, {\n      name: \"md-download-outline\",\n      size: vmin(7),\n      color: \"rgba(153, 153, 153, 1)\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 17\n      }\n    })) : React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"rgba(52, 152, 219, 1)\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 17\n      }\n    }, \"Descargando\"), React.createElement(ActivityIndicator, {\n      size: \"small\",\n      color: \"rgba(52, 152, 219, 1)\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 17\n      }\n    })))));\n  };\n\n  var SecondSection = function SecondSection(element) {\n    var title2 = element.phase !== \"\" ? \"\" : element.title;\n    var exerciseCollection = element.exercises;\n    return React.createElement(View, {\n      style: SecondSectionStyles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: SecondSectionStyles.title,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 9\n      }\n    }, title2), React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }\n    }, React.createElement(FlatList, {\n      horizontal: true,\n      data: exerciseCollection,\n      renderItem: OverviewExercise,\n      style: {},\n      keyExtractor: function keyExtractor(item, index) {\n        return item.key;\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  var OverviewExercise = function OverviewExercise(item) {\n    var exercise = item.item;\n    var day = exercise.day;\n    var time = exercise.time;\n    var multimedia = exercise.multimedia;\n    var materials = exercise.materials || false;\n    var materialsBackground = materials ? \"rgba(142, 255, 127 ,1)\" : \"rgba(255, 136, 110,1)\";\n    var key_e = item.index;\n    return React.createElement(TouchableOpacity, {\n      key: key_e + \"e\",\n      style: OverviewExerciseStyles.container,\n      onPress: function onPress() {\n        return props.props.navigation.navigate(\"IndividualExcercise\", {\n          data: exercise.data\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: OverviewExerciseStyles.imageContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 9\n      }\n    }, React.createElement(Image, {\n      source: {\n        uri: multimedia\n      },\n      style: {\n        width: \"100%\",\n        height: \"100%\",\n        resizeMode: \"cover\",\n        borderRadius: 13\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 11\n      }\n    })), React.createElement(View, {\n      style: OverviewExerciseStyles.containerTexts,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: OverviewExerciseStyles.title,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 11\n      }\n    }, day), React.createElement(Text, {\n      style: [OverviewExerciseStyles.subtitle, {\n        backgroundColor: materialsBackground\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 11\n      }\n    }, \"Materiales \", materials ? \"✅\" : \"❌\")));\n  };\n\n  if (loading) {\n    return React.createElement(View, {\n      style: {\n        justifyContent: \"center\",\n        height: \"100%\",\n        marginTop: \"5%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 7\n      }\n    }, React.createElement(ChargeScreen, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 9\n      }\n    }));\n  } else if (information.length !== 0) {\n    console.warn(\"informacion--------\", information);\n    return React.createElement(View, {\n      style: styles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: styles.header,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 9\n      }\n    }, NavigationButton()), React.createElement(ScrollView, {\n      style: styles.body,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 9\n      }\n    }, information.map(function (aaa, index) {\n      return FirstSection(aaa, index);\n    })));\n  } else {\n    return React.createElement(View, {\n      style: styles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"center\",\n        fontSize: vmin(8),\n        color: \"rgba(153, 153, 153, 1)\",\n        marginTop: \"50%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }\n    }, \"No hay descargas\"));\n  }\n};\n\nvar MapStateToProps = function MapStateToProps(store) {\n  return {\n    user: store.User.user,\n    connection: store.User.connection,\n    previusIdentifiers: store.DownloadReducer.ExerciseRoutineIndentifiers,\n    ExerciseRoutine: store.DownloadReducer.ExerciseRoutine\n  };\n};\n\nvar MapDispatchToProps = function MapDispatchToProps(dispatch, store) {\n  return {\n    addItemToExerciseRoutine: function addItemToExerciseRoutine(data) {\n      return dispatch(actionsDownload.ADD_ITEM_TO_EXERCISE_ROUTINE(data));\n    },\n    removeExercises: function removeExercises(data) {\n      return dispatch(actionsDownload.REMOVE_EXERCISE_LIST(data));\n    },\n    deleteExercise: function deleteExercise(data) {\n      return dispatch(actionsDownload.REMOVE_EXERCISE_ITEM(data));\n    }\n  };\n};\n\nexport default connect(MapStateToProps, MapDispatchToProps)(ExerciseRoutine);\nvar styles = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"white\"\n  },\n  header: {\n    width: \"100%\",\n    height: \"10%\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\",\n    borderColor: \"rgba(21, 21, 34, 1)\"\n  },\n  body: {\n    width: \"100%\",\n    height: \"88%\"\n  }\n});\nvar navigationStyles = StyleSheet.create({\n  containerNavigationButton: {\n    width: \"90%\",\n    flexDirection: \"row\",\n    marginTop: vmin(2),\n    height: \"80%\",\n    borderRadius: 10,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"rgba(105, 121, 248, 1)\"\n  },\n  sideButton: {\n    height: \"100%\",\n    width: \"15%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 10\n  },\n  navigationButtonText: {\n    height: \"70%\",\n    width: \"70%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderColor: \"rgba(255, 255, 255, 0.3)\",\n    borderLeftWidth: vmin(0.5),\n    borderRightWidth: vmin(0.5)\n  },\n  whiteText: {\n    color: \"white\"\n  }\n});\nvar FirstSectionStyles = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    backgroundColor: \"white\",\n    justifyContent: \"space-evenly\",\n    borderColor: \"rgba(21, 21, 34, 1)\",\n    borderBottomWidth: vmin(0.4),\n    paddingTop: \"5%\",\n    paddingBottom: \"5%\",\n    paddingLeft: \"2%\",\n    paddingRight: \"2%\"\n  },\n  rowContainer: {\n    flexDirection: \"row\"\n  },\n  title: {\n    paddingLeft: vmin(1),\n    fontWeight: \"bold\",\n    width: \"65%\",\n    fontSize: vmin(4.3)\n  },\n  iconContainer: {\n    width: \"35%\",\n    justifyContent: \"center\",\n    alignItems: \"flex-end\"\n  },\n  downloadButton: {\n    width: \"100%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flexDirection: \"row\"\n  }\n});\nvar SecondSectionStyles = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    justifyContent: \"space-evenly\",\n    padding: \"3%\"\n  },\n  title: {\n    marginBottom: vmin(2),\n    fontWeight: \"bold\",\n    fontSize: vmin(3),\n    fontStyle: \"italic\"\n  }\n});\nvar OverviewExerciseStyles = StyleSheet.create({\n  container: {\n    width: vmin(24),\n    height: vmin(44),\n    marginRight: vmin(2)\n  },\n  containerTexts: {\n    width: \"100%\",\n    height: \"20%\"\n  },\n  title: {\n    fontSize: vmin(3),\n    fontWeight: \"bold\",\n    width: \"100%\",\n    textAlign: \"center\"\n  },\n  subtitle: {\n    fontSize: vmin(3),\n    color: \"black\",\n    width: \"100%\",\n    textAlign: \"center\"\n  },\n  imageContainer: {\n    overflow: \"hidden\",\n    width: \"100%\",\n    height: \"80%\",\n    borderRadius: 13,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 3\n    },\n    shadowOpacity: 0.29,\n    shadowRadius: 4.65,\n    elevation: 7\n  }\n});","map":{"version":3,"sources":["C:/Users/dani1/Desktop/apptivate/src/components/cards/ExerciseRoutine.tsx"],"names":["React","useEffect","useState","firebase","Download","MaterialIcons","require","vmin","connect","actionsDownload","FileSystem","ChargeScreen","ExerciseRoutine","props","information","setInformation","CurrentInformation","setCurrentInformation","loading","setLoading","exists","setExistence","pending","setPending","protocol","title","key","getProtocol","list","length","db","collection","doc","get","then","element","data","Object","values","map","info","temp","phase","setup","promises","refs","ref","index","res","push","Promise","all","finished","console","warn","catch","e","log","basicPhaseExercises","exercises","Item","numItem","resolve","reject","numItems","getBasicData","dbRef","querySnapshot","docs","ejerciciosXfase","arrayBasicExercises","Array","promises2","i","title1","id","title2","exerciseCollection","j","day","time","activeTime","multimedia","gif","materials","getInformationWeeks","array2","ArraySetup","res2","refSetup","getSetup","setupValues","map2","getUrls","items","urlList","forEach","getAudioUrls","voz","getExercises","connection","undefined","basic","weeks","ordenado","ordenado2","concat","mounted","NavigationButton","navigationStyles","containerNavigationButton","sideButton","whiteText","fontSize","navigationButtonText","downloadSection","sectionIndex","urls","audioUrls","fileUri","documentDirectory","audioUri","downloadAsync","downloadedFile","downloadedFile1","series","item","serie","previusIdentifiers","includes","sectionToSave","addItemToExerciseRoutine","newExercise","deleteMultimedia","uri","deleteAsync","deleteInformation","dlete","urlsAudio","deleteExercise","FirstSection","existsInDownloads","pendingDownload","FirstSectionStyles","container","rowContainer","iconContainer","downloadButton","Alert","alert","text","style","onPress","cancelable","color","download","flexDirection","SecondSection","SecondSectionStyles","OverviewExercise","exercise","materialsBackground","key_e","OverviewExerciseStyles","navigation","navigate","imageContainer","width","height","resizeMode","borderRadius","containerTexts","subtitle","backgroundColor","justifyContent","marginTop","styles","header","body","aaa","textAlign","MapStateToProps","store","user","User","DownloadReducer","ExerciseRoutineIndentifiers","MapDispatchToProps","dispatch","ADD_ITEM_TO_EXERCISE_ROUTINE","removeExercises","REMOVE_EXERCISE_LIST","REMOVE_EXERCISE_ITEM","StyleSheet","create","alignItems","borderColor","borderLeftWidth","borderRightWidth","borderBottomWidth","paddingTop","paddingBottom","paddingLeft","paddingRight","fontWeight","padding","marginBottom","fontStyle","marginRight","overflow","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from \"react\";\r\nimport {\r\n  View,\r\n  StyleSheet,\r\n  Text,\r\n  TouchableOpacity,\r\n  FlatList,\r\n  Alert,\r\n  ScrollView,\r\n  ActivityIndicator,\r\n  Image,\r\n} from \"react-native\";\r\n\r\nimport firebase from \"../../../database/firebase\";\r\nimport Download from \"react-native-vector-icons/Ionicons\";\r\nimport MaterialIcons from \"react-native-vector-icons/MaterialIcons\";\r\n\r\nvar { vmin } = require(\"react-native-expo-viewport-units\");\r\n\r\n// redux\r\n\r\nimport { Dispatch } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport * as MyTypes from \"../../redux/types/types\";\r\nimport { actionsUser } from \"../../redux/actions/actionsUser\";\r\nimport { actionsDownload } from \"../../redux/actions/actionsDownload\";\r\n\r\nimport * as FileSystem from \"expo-file-system\";\r\n\r\nimport NavigateNext from \"react-native-vector-icons/MaterialIcons\";\r\nimport ChargeScreen from \"../Simple/ChargeScreen\";\r\n\r\nconst ExerciseRoutine = (props) => {\r\n  const [information, setInformation] = useState([]);\r\n  const [CurrentInformation, setCurrentInformation] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [exists, setExistence] = useState(false);\r\n  const [pending, setPending] = useState(false);\r\n\r\n  const protocol = [\r\n    { title: \"Fase Preprotésica\", key: \"preprotesico\" },\r\n    {\r\n      title: \"Fase Protésica\",\r\n      key: \"protesico\",\r\n    },\r\n  ];\r\n\r\n  const getProtocol = async () => {\r\n    let list: any = [];\r\n    if (information.length !== 14) {\r\n      await firebase.db\r\n        .collection(\"protocol\")\r\n        .doc(\"protesico\")\r\n        .get()\r\n        .then((element) => {\r\n          let data: any = element.data();\r\n          Object.values(data).map(async (element: any) => {\r\n            let info: any = [];\r\n            let temp = {};\r\n            temp[\"title\"] = element.title;\r\n            temp[\"phase\"] = element.phase;\r\n            temp[\"setup\"] = element.setup;\r\n\r\n            const promises = element.refs.map(async (ref, index) => {\r\n              await ref.get().then((res) => info.push(res.data()));\r\n              return info;\r\n            });\r\n            const finished = await Promise.all(promises);\r\n              console.warn(\"finished---\", finished);\r\n            temp[\"exercises\"] = finished;\r\n            list.push(temp);\r\n            if(list.length===element.refs.length){\r\n              return list;\r\n            }\r\n          });\r\n          console.warn(\"end then\")\r\n        })\r\n        .catch((e) => {\r\n          console.log(\"El error es \", e);\r\n        });\r\n    } else {\r\n      console.warn(\"lisr---\", list);\r\n        setInformation(list);\r\n        setLoading(false);\r\n      \r\n    }\r\n  };\r\n  const basicPhaseExercises = async (exercises) => {\r\n    const promises = exercises.map(async (Item) => {\r\n      const numItem = await Item.get();\r\n      return numItem;\r\n    });\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n      const numItems = await Promise.all(promises);\r\n\r\n      resolve(numItems.map((e) => e.data()));\r\n    });\r\n  };\r\n\r\n  const getBasicData = async () => {\r\n    let dbRef = firebase.db\r\n      .collection(\"protocol\")\r\n      .doc(\"protesico\")\r\n      .collection(\"basic\");\r\n\r\n    return dbRef.get().then(async (querySnapshot) => {\r\n      const promises = querySnapshot.docs.map(async (doc) => {\r\n        let ejerciciosXfase = Object.values(doc.data());\r\n        let res = basicPhaseExercises(ejerciciosXfase);\r\n        return res;\r\n      });\r\n\r\n      const arrayBasicExercises: any = await Promise.all(promises);\r\n\r\n      let Array: any = [];\r\n\r\n      const promises2 = querySnapshot.docs.map(async (doc, i) => {\r\n        // doc.data() is never undefined for query doc snapshots\r\n        Array.push({\r\n          title1:\r\n            doc.id == \"cooldown\"\r\n              ? \"Enfriamiento\"\r\n              : doc.id == \"stretch\"\r\n              ? \"Estiramiento\"\r\n              : \"Calentamiento\",\r\n          collection: [\r\n            {\r\n              title2: \"\",\r\n              exerciseCollection: arrayBasicExercises[i].map((e, j) => {\r\n                // console.log(\r\n                //   \"3838383838383838383838888383838383838383383833838383838383833838383,\",\r\n                //   e\r\n                // );\r\n                return {\r\n                  day: \"Ejercicio \" + (j - -1),\r\n                  time: e.activeTime || \"\",\r\n                  multimedia: e.gif,\r\n                  materials: e.materials || false,\r\n                  data: { ...e },\r\n                };\r\n              }),\r\n            },\r\n          ],\r\n        });\r\n      });\r\n\r\n      //console.log(\"resultado #1\", Array, \" anres estaba\", information);\r\n      return Array;\r\n    });\r\n  };\r\n\r\n  const getInformationWeeks = async () => {\r\n    let Array: any = [];\r\n    let array2: any = [];\r\n    let ArraySetup: any = [];\r\n\r\n    for (let index = 0; index < 1; index++) {\r\n      let dbRef = firebase.db\r\n        .collection(\"protocol\")\r\n        .doc(\"protesico\")\r\n        .collection(\"week\" + (index + 1))\r\n        .doc(\"active\");\r\n\r\n      let res2 = await dbRef.get();\r\n      let ejerciciosXfase = Object.values(res2.data());\r\n      let res = await basicPhaseExercises(ejerciciosXfase);\r\n      // console.log(\"ooooooooooo\", res);\r\n      array2.push(res);\r\n\r\n      // Aqui se pide el setup por semanas\r\n      let refSetup = firebase.db\r\n        .collection(\"protocol\")\r\n        .doc(\"protesico\")\r\n        .collection(\"week\" + (index + 1))\r\n        .doc(\"setup\");\r\n\r\n      let getSetup = await refSetup.get();\r\n      let setupValues = getSetup.data();\r\n      // console.warn(\r\n      //   \"Setup Setup Setup Setup Setup Setup Setup Setup Setup \",\r\n      //   setupValues\r\n      // );\r\n      ArraySetup.push(setupValues);\r\n    }\r\n\r\n    let map2 = array2.map((element, index) => {\r\n      Array.push({\r\n        title1: index <= 3 ? \"Fase inicial\" : \"Fase intermedia\",\r\n        collection: [\r\n          {\r\n            title2: \"Semana \" + index + 1,\r\n            exerciseCollection: element.map((e, j) => {\r\n              return {\r\n                day: \"Ejercicio \" + (j - -1),\r\n                time: e.activeTime || \"\",\r\n                multimedia: e.gif,\r\n                materials: e.materials || false,\r\n                data: { ...e, ...ArraySetup[j] },\r\n              };\r\n            }),\r\n          },\r\n        ],\r\n      });\r\n    });\r\n\r\n    //  console.log(\"resultado #2\", Array, \" anres estaba\", information);\r\n    return Array;\r\n  };\r\n\r\n  const getUrls = (items) => {\r\n    // console.log(items);\r\n    let urlList = [];\r\n    items.forEach((element) => {\r\n      urlList.push(element.multimedia);\r\n    });\r\n    return urlList;\r\n  };\r\n\r\n  const getAudioUrls = (items) => {\r\n    let urlList = [];\r\n    items.forEach((element) => {\r\n      console.warn(\"voz====\", items);\r\n      urlList.push(element.data.voz);\r\n    });\r\n    return urlList;\r\n  };\r\n\r\n  const getExercises = async () => {\r\n    // console.log(\"connection----\", props.connection)\r\n    if (props.connection && information[0] === undefined) {\r\n      // console.log(\"index 0 value info------\",information[0])\r\n      let basic: [] = await getBasicData();\r\n      let weeks: [] = await getInformationWeeks();\r\n      //console.warn(\"weeks\", weeks);\r\n      let ordenado: any = [];\r\n      ordenado[0] = basic[2];\r\n      ordenado[1] = basic[1];\r\n\r\n      let ordenado2 = ordenado.concat(weeks);\r\n      ordenado2.push(basic[0]);\r\n      //  console.log(\"retried from database------\", ordenado2);\r\n\r\n      setInformation(ordenado2);\r\n      // Se guardan datos en el reducer\r\n      setLoading(false);\r\n    } else {\r\n      // console.warn(\"eles exercise props\", props.ExerciseRoutine)\r\n      setInformation(props.ExerciseRoutine);\r\n      //  console.warn(\"Hubo problemas de conexion\");\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    // console.warn(\"in useEffect----\", mounted);\r\n    if (mounted) {\r\n      getProtocol();\r\n      // getExercises();\r\n    }\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const NavigationButton = () => {\r\n    return (\r\n      <View style={navigationStyles.containerNavigationButton}>\r\n        <TouchableOpacity\r\n          onPress={() => {\r\n            if (CurrentInformation - 1 >= 0) {\r\n              setCurrentInformation(CurrentInformation - 1);\r\n            } else if (CurrentInformation === 0) {\r\n              setCurrentInformation(1);\r\n            }\r\n          }}\r\n          style={navigationStyles.sideButton}\r\n        >\r\n          <Text style={[navigationStyles.whiteText, { fontSize: vmin(5) }]}>\r\n            {\"<\"}\r\n          </Text>\r\n        </TouchableOpacity>\r\n        <View style={navigationStyles.navigationButtonText}>\r\n          <Text style={navigationStyles.whiteText}>\r\n            {protocol[CurrentInformation].title}\r\n          </Text>\r\n        </View>\r\n        <TouchableOpacity\r\n          style={navigationStyles.sideButton}\r\n          onPress={() => {\r\n            if (CurrentInformation + 1 < protocol.length) {\r\n              setCurrentInformation(CurrentInformation + 1);\r\n            } else if (CurrentInformation === 1) {\r\n              setCurrentInformation(0);\r\n            }\r\n          }}\r\n        >\r\n          <Text style={[navigationStyles.whiteText, { fontSize: vmin(5) }]}>\r\n            {\">\"}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const downloadSection = async ({ sectionIndex, title }) => {\r\n    const urls = getUrls(\r\n      information[sectionIndex].collection[0].exerciseCollection\r\n    );\r\n    const audioUrls = getAudioUrls(\r\n      information[sectionIndex].collection[0].exerciseCollection\r\n    );\r\n    let items: any = [...information];\r\n    console.warn(\"item---\", items);\r\n    await Promise.all(\r\n      urls.map(async (element, index) => {\r\n        const fileUri: string = `${FileSystem.documentDirectory}${\r\n          title + index\r\n        }`;\r\n        const audioUri: string = `${FileSystem.documentDirectory}${\r\n          title + \"Audio\" + index\r\n        }`;\r\n\r\n        const downloadedFile: FileSystem.FileSystemDownloadResult =\r\n          await FileSystem.downloadAsync(element, fileUri);\r\n\r\n        if (audioUrls[index] !== \"cloudstorageID\") {\r\n          const downloadedFile1: FileSystem.FileSystemDownloadResult =\r\n            await FileSystem.downloadAsync(audioUrls[index], audioUri);\r\n        }\r\n        console.warn(\r\n          \"collection---\",\r\n          items[sectionIndex].collection[0].exerciseCollection[index].data\r\n            .series\r\n        );\r\n        let item = {\r\n          ...items[sectionIndex].collection[0].exerciseCollection[index],\r\n          voz: audioUri,\r\n          gif: fileUri,\r\n          multimedia: fileUri,\r\n          serie: items[sectionIndex].collection[0].exerciseCollection[index],\r\n        };\r\n        items[sectionIndex].collection[0].exerciseCollection[index] = item;\r\n        setInformation(items);\r\n      })\r\n    );\r\n    if (!props.previusIdentifiers.includes(title)) {\r\n      let sectionToSave = information[sectionIndex];\r\n      console.warn(\"section---\", information[sectionIndex]);\r\n      props.addItemToExerciseRoutine({ newExercise: sectionToSave, title });\r\n    }\r\n    setExistence(!exists);\r\n  };\r\n\r\n  const deleteMultimedia = async (uri) => {\r\n    try {\r\n      await FileSystem.deleteAsync(FileSystem.documentDirectory + uri);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const deleteInformation = (sectionIndex, title) => {\r\n    const urls = getUrls(\r\n      props.ExerciseRoutine[sectionIndex].collection[0].exerciseCollection\r\n    );\r\n    urls.forEach(async (uri) => {\r\n      const dlete = await deleteMultimedia(uri);\r\n    });\r\n    const urlsAudio = getAudioUrls(\r\n      props.ExerciseRoutine[sectionIndex].collection[0].exerciseCollection\r\n    );\r\n    urlsAudio.forEach(async (uri) => {\r\n      const dlete = await deleteMultimedia(uri);\r\n    });\r\n    props.deleteExercise(title);\r\n    setExistence(!exists);\r\n  };\r\n\r\n  const FirstSection = (info, sectionIndex) => {\r\n    let title = info.phase !== \"\" ? info.phase : info.title;\r\n    console.log(\"info fisrt\", info.exercises);\r\n\r\n    let existsInDownloads = props.previusIdentifiers.includes(title);\r\n    let pendingDownload = 0;\r\n\r\n    return (\r\n      <View style={FirstSectionStyles.container}>\r\n        <View style={FirstSectionStyles.rowContainer}>\r\n          <Text style={FirstSectionStyles.title}>{title}</Text>\r\n          <View style={FirstSectionStyles.iconContainer}>\r\n            {/* <NavigateNext name=\"navigate-next\" size={vmin(7)} color=\"black\" /> */}\r\n\r\n            {existsInDownloads ? (\r\n              <TouchableOpacity\r\n                style={FirstSectionStyles.downloadButton}\r\n                onPress={() => {\r\n                  // Alert.alert(\" ALert on press \");\r\n                  Alert.alert(\r\n                    \"Eliminar \" + title,\r\n                    \"¿Está seguro que quiere eliminar la descarga de \" +\r\n                      title +\r\n                      \"?\",\r\n                    [\r\n                      {\r\n                        text: \"Cancelar\",\r\n                        style: \"cancel\",\r\n                      },\r\n                      {\r\n                        text: \"Eliminar\",\r\n                        onPress: async () => {\r\n                          const dlete = await deleteInformation(\r\n                            sectionIndex,\r\n                            title\r\n                          );\r\n                        },\r\n                      },\r\n                    ],\r\n                    { cancelable: false }\r\n                  );\r\n                }}\r\n              >\r\n                <Text style={{ color: \"rgba(52, 152, 219, 1)\" }}>\r\n                  Descargado\r\n                </Text>\r\n                <MaterialIcons\r\n                  name=\"file-download-done\"\r\n                  size={vmin(7)}\r\n                  color=\"rgba(52, 152, 219, 1)\"\r\n                />\r\n              </TouchableOpacity>\r\n            ) : !pending ? (\r\n              <TouchableOpacity\r\n                onPress={async () => {\r\n                  //Alert.alert(title);\r\n                  Alert.alert(\r\n                    \"Descargar \" + title,\r\n                    \"¿Está seguro que quiere descargar \" + title + \"?\",\r\n                    [\r\n                      {\r\n                        text: \"Cancelar\",\r\n                        style: \"cancel\",\r\n                      },\r\n                      {\r\n                        text: \"Descargar\",\r\n                        onPress: async () => {\r\n                          setPending(true);\r\n                          const download = await downloadSection({\r\n                            sectionIndex,\r\n                            title,\r\n                          });\r\n                          setPending(false);\r\n                        },\r\n                      },\r\n                    ],\r\n                    { cancelable: false }\r\n                  );\r\n                }}\r\n                style={FirstSectionStyles.downloadButton}\r\n              >\r\n                <Text style={{ color: \"rgba(153, 153, 153, 1)\" }}>\r\n                  Descargar\r\n                </Text>\r\n                <Download\r\n                  name=\"md-download-outline\"\r\n                  size={vmin(7)}\r\n                  color=\"rgba(153, 153, 153, 1)\"\r\n                />\r\n              </TouchableOpacity>\r\n            ) : (\r\n              <View style={{ flexDirection: \"row\" }}>\r\n                <Text style={{ color: \"rgba(52, 152, 219, 1)\" }}>\r\n                  Descargando\r\n                </Text>\r\n                <ActivityIndicator size=\"small\" color=\"rgba(52, 152, 219, 1)\" />\r\n              </View>\r\n            )}\r\n          </View>\r\n        </View>\r\n\r\n        {/* <View>\r\n          {info.map((element, index) => (\r\n            <SecondSection key={\"sec2\" + index} element={element} />\r\n          ))}\r\n        </View> */}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const SecondSection = (element) => {\r\n    let title2 = element.phase !== \"\" ? \"\" : element.title;\r\n    let exerciseCollection = element.exercises;\r\n    return (\r\n      <View style={SecondSectionStyles.container}>\r\n        <Text style={SecondSectionStyles.title}>{title2}</Text>\r\n        <View>\r\n          <FlatList\r\n            horizontal\r\n            data={exerciseCollection}\r\n            renderItem={OverviewExercise}\r\n            style={{}}\r\n            keyExtractor={(item, index) => item.key}\r\n          />\r\n        </View>\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const OverviewExercise = (item) => {\r\n    //console.warn(\"El item que llega al ejercicios es :\", item);\r\n    let exercise = item.item;\r\n    let day = exercise.day;\r\n    let time = exercise.time;\r\n    let multimedia = exercise.multimedia;\r\n    let materials = exercise.materials || false;\r\n    let materialsBackground = materials\r\n      ? \"rgba(142, 255, 127 ,1)\"\r\n      : \"rgba(255, 136, 110,1)\";\r\n\r\n    let key_e = item.index;\r\n\r\n    // console.log(\r\n    //   \"Las props que tenemos hata aca son:::::::::::::::::\",\r\n    //   exercise.data\r\n    // );\r\n\r\n    return (\r\n      <TouchableOpacity\r\n        key={key_e + \"e\"}\r\n        style={OverviewExerciseStyles.container}\r\n        onPress={() =>\r\n          props.props.navigation.navigate(\"IndividualExcercise\", {\r\n            data: exercise.data,\r\n          })\r\n        }\r\n      >\r\n        <View style={OverviewExerciseStyles.imageContainer}>\r\n          <Image\r\n            source={{ uri: multimedia }}\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              resizeMode: \"cover\",\r\n              borderRadius: 13,\r\n            }}\r\n          />\r\n        </View>\r\n        <View style={OverviewExerciseStyles.containerTexts}>\r\n          <Text style={OverviewExerciseStyles.title}>{day}</Text>\r\n          {/* <Text style={OverviewExerciseStyles.subtitle}>{time}</Text> */}\r\n          <Text\r\n            style={[\r\n              OverviewExerciseStyles.subtitle,\r\n              { backgroundColor: materialsBackground },\r\n            ]}\r\n          >\r\n            Materiales {materials ? \"✅\" : \"❌\"}\r\n          </Text>\r\n        </View>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <View\r\n        style={{ justifyContent: \"center\", height: \"100%\", marginTop: \"5%\" }}\r\n      >\r\n        <ChargeScreen />\r\n      </View>\r\n    );\r\n  } else if (information.length !== 0) {\r\n    console.warn(\"informacion--------\", information);\r\n    return (\r\n      <View style={styles.container}>\r\n        <View style={styles.header}>\r\n          {/* <Text> Coleccion de ejercicios. </Text> */}\r\n          {NavigationButton()}\r\n        </View>\r\n\r\n        <ScrollView style={styles.body}>\r\n          {information.map((aaa, index) => FirstSection(aaa, index))}\r\n        </ScrollView>\r\n      </View>\r\n    );\r\n  } else {\r\n    return (\r\n      <View style={styles.container}>\r\n        <Text\r\n          style={{\r\n            textAlign: \"center\",\r\n            fontSize: vmin(8),\r\n            color: \"rgba(153, 153, 153, 1)\",\r\n            marginTop: \"50%\",\r\n          }}\r\n        >\r\n          No hay descargas\r\n        </Text>\r\n      </View>\r\n    );\r\n  }\r\n};\r\nconst MapStateToProps = (store: MyTypes.ReducerState) => {\r\n  // console.log(\r\n  //   \"exercise rotone reducer-------\",\r\n  //   store.DownloadReducer.ExerciseRoutine\r\n  // );\r\n  return {\r\n    user: store.User.user,\r\n    connection: store.User.connection,\r\n    previusIdentifiers: store.DownloadReducer.ExerciseRoutineIndentifiers,\r\n    ExerciseRoutine: store.DownloadReducer.ExerciseRoutine,\r\n  };\r\n};\r\n\r\nconst MapDispatchToProps = (dispatch: Dispatch, store: any) => ({\r\n  addItemToExerciseRoutine: (data) =>\r\n    dispatch(actionsDownload.ADD_ITEM_TO_EXERCISE_ROUTINE(data)),\r\n  removeExercises: (data) =>\r\n    dispatch(actionsDownload.REMOVE_EXERCISE_LIST(data)),\r\n  deleteExercise: (data) =>\r\n    dispatch(actionsDownload.REMOVE_EXERCISE_ITEM(data)),\r\n});\r\nexport default connect(MapStateToProps, MapDispatchToProps)(ExerciseRoutine);\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    backgroundColor: \"white\",\r\n  },\r\n\r\n  header: {\r\n    width: \"100%\",\r\n    height: \"10%\",\r\n    // backgroundColor: \"salmon\",\r\n\r\n    justifyContent: \"space-evenly\",\r\n    alignItems: \"center\",\r\n    borderColor: \"rgba(21, 21, 34, 1)\",\r\n    // borderBottomWidth: vmin(0.4),\r\n  },\r\n\r\n  body: {\r\n    width: \"100%\",\r\n    height: \"88%\",\r\n    // backgroundColor: \"red\"\r\n  },\r\n});\r\n\r\nconst navigationStyles = StyleSheet.create({\r\n  containerNavigationButton: {\r\n    width: \"90%\",\r\n    flexDirection: \"row\",\r\n    marginTop: vmin(2),\r\n    height: \"80%\",\r\n    borderRadius: 10,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"rgba(105, 121, 248, 1)\",\r\n  },\r\n\r\n  sideButton: {\r\n    height: \"100%\",\r\n    width: \"15%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 10,\r\n  },\r\n\r\n  navigationButtonText: {\r\n    height: \"70%\",\r\n    width: \"70%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderColor: \"rgba(255, 255, 255, 0.3)\",\r\n    borderLeftWidth: vmin(0.5),\r\n    borderRightWidth: vmin(0.5),\r\n  },\r\n\r\n  whiteText: {\r\n    color: \"white\",\r\n  },\r\n});\r\n\r\nconst FirstSectionStyles = StyleSheet.create({\r\n  container: {\r\n    width: \"100%\",\r\n    backgroundColor: \"white\",\r\n    justifyContent: \"space-evenly\",\r\n    borderColor: \"rgba(21, 21, 34, 1)\",\r\n    borderBottomWidth: vmin(0.4),\r\n    paddingTop: \"5%\",\r\n    paddingBottom: \"5%\",\r\n    paddingLeft: \"2%\",\r\n    paddingRight: \"2%\",\r\n  },\r\n  rowContainer: {\r\n    flexDirection: \"row\",\r\n  },\r\n  title: {\r\n    paddingLeft: vmin(1),\r\n    fontWeight: \"bold\",\r\n    width: \"65%\",\r\n    fontSize: vmin(4.3),\r\n  },\r\n  iconContainer: {\r\n    width: \"35%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"flex-end\",\r\n  },\r\n\r\n  downloadButton: {\r\n    width: \"100%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    // backgroundColor: \"red\",\r\n  },\r\n});\r\n\r\nconst SecondSectionStyles = StyleSheet.create({\r\n  container: {\r\n    width: \"100%\",\r\n    // backgroundColor: \"peru\",\r\n    justifyContent: \"space-evenly\",\r\n    padding: \"3%\",\r\n  },\r\n\r\n  title: {\r\n    marginBottom: vmin(2),\r\n    fontWeight: \"bold\",\r\n    fontSize: vmin(3),\r\n    fontStyle: \"italic\",\r\n  },\r\n});\r\n\r\nconst OverviewExerciseStyles = StyleSheet.create({\r\n  container: {\r\n    width: vmin(24),\r\n    height: vmin(44),\r\n    // backgroundColor: \"yellow\",\r\n    marginRight: vmin(2),\r\n  },\r\n\r\n  containerTexts: {\r\n    width: \"100%\",\r\n    height: \"20%\",\r\n  },\r\n\r\n  title: {\r\n    fontSize: vmin(3),\r\n    fontWeight: \"bold\",\r\n    width: \"100%\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  subtitle: {\r\n    fontSize: vmin(3),\r\n    color: \"black\",\r\n    width: \"100%\",\r\n    textAlign: \"center\",\r\n  },\r\n\r\n  imageContainer: {\r\n    overflow: \"hidden\",\r\n    width: \"100%\",\r\n    height: \"80%\",\r\n    // backgroundColor: \"green\",\r\n    borderRadius: 13,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 3,\r\n    },\r\n    shadowOpacity: 0.29,\r\n    shadowRadius: 4.65,\r\n\r\n    elevation: 7,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}