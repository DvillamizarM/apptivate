{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\dani1\\\\Desktop\\\\apptivate\\\\src\\\\components\\\\screens\\\\Home.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { actionsUser } from \"../../redux/actions/actionsUser\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AppState from \"react-native-web/dist/exports/AppState\";\nimport NetInfo from \"@react-native-community/netinfo\";\nimport firebase from \"../../../database/firebase\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport Constants from \"expo-constants\";\nimport * as Notifications from \"expo-notifications\";\n\nvar _require = require(\"react-native-expo-viewport-units\"),\n    vmin = _require.vmin;\n\nimport Login from \"./Login\";\nimport NavigateNext from \"@expo/vector-icons/MaterialIcons\";\nimport BookOutline from \"@expo/vector-icons/Ionicons\";\nimport Dumbbell from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport User_o from \"@expo/vector-icons/FontAwesome\";\nimport CompanionHome from \"../companion/CompanionHome\";\nimport HomePhysiotherapist from \"../Physiotherapist/HomePhysiotherapist\";\nimport AdministratorHome from \"../Administrator/AdministratorHome\";\nimport { actionsDownload } from \"../../redux/actions/actionsDownload\";\nimport ChargeScreen from \"../Simple/ChargeScreen\";\n\nvar HomeScreen = function (_React$Component) {\n  _inherits(HomeScreen, _React$Component);\n\n  var _super = _createSuper(HomeScreen);\n\n  function HomeScreen(_props) {\n    var _this;\n\n    _classCallCheck(this, HomeScreen);\n\n    _this = _super.call(this, _props);\n    _this.state = {\n      appState: AppState.currentState,\n      connection: false,\n      publicUser: null,\n      initializing: true,\n      mounted: true,\n      unsubscribe: function unsubscribe() {}\n    };\n\n    _this.checkNetInfo = function () {\n      NetInfo.fetch().then(function (state) {\n        _this.props.setConnection(state.isConnected);\n\n        _this.setState({\n          connection: state.isConnected\n        });\n      });\n    };\n\n    _this.registerForPushNotificationsAsync = function _callee() {\n      var _firebase$auth$curren, token, _await$Notifications$, existingStatus, finalStatus, _await$Notifications$2, status, res;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!Constants.isDevice) {\n                _context.next = 22;\n                break;\n              }\n\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(Notifications.getPermissionsAsync());\n\n            case 4:\n              _await$Notifications$ = _context.sent;\n              existingStatus = _await$Notifications$.status;\n              finalStatus = existingStatus;\n\n              if (!(existingStatus !== \"granted\")) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(Notifications.requestPermissionsAsync());\n\n            case 10:\n              _await$Notifications$2 = _context.sent;\n              status = _await$Notifications$2.status;\n              finalStatus = status;\n\n            case 13:\n              if (!(finalStatus !== \"granted\")) {\n                _context.next = 16;\n                break;\n              }\n\n              Alert.alert(\"Failed to get push token for push notification!\");\n              return _context.abrupt(\"return\");\n\n            case 16:\n              _context.next = 18;\n              return _regeneratorRuntime.awrap(Notifications.getExpoPushTokenAsync());\n\n            case 18:\n              token = _context.sent.data;\n\n              _this.setState({\n                expoPushToken: token\n              });\n\n              _context.next = 23;\n              break;\n\n            case 22:\n              Alert.alert(\"Must use physical device for Push Notifications\");\n\n            case 23:\n              _context.next = 25;\n              return _regeneratorRuntime.awrap(firebase.db.collection(\"users\").doc((_firebase$auth$curren = firebase.auth.currentUser) == null ? void 0 : _firebase$auth$curren.uid).set({\n                token: token\n              }, {\n                merge: true\n              }));\n\n            case 25:\n              res = _context.sent;\n\n              if (Platform.OS === \"android\") {\n                Notifications.setNotificationChannelAsync(\"default\", {\n                  name: \"default\",\n                  importance: Notifications.AndroidImportance.MAX,\n                  vibrationPattern: [0, 250, 250, 250],\n                  lightColor: \"#FF231F7C\"\n                });\n              }\n\n              _context.next = 31;\n              break;\n\n            case 29:\n              _context.prev = 29;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 31:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 29]], Promise);\n    };\n\n    _this.componentDidMount = function () {\n      try {\n        if (!_this.props.cachedEndRoutines.empty) {\n          _this.syncCachedEndRoutines(_this.props.cachedEndRoutines);\n        }\n\n        _this.checkNetInfo();\n\n        if (_this.state.mounted) {\n          var temp = firebase.auth.onAuthStateChanged(_this.onAuthStateChanged);\n        }\n      } catch (error) {\n        console.warn(\"Home Error ---\", error);\n      }\n    };\n\n    _this.onAuthStateChanged = function _callee2(user) {\n      var user2;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              user2 = {};\n\n              if (!(user && user.email !== \"\")) {\n                _context2.next = 6;\n                break;\n              }\n\n              if (!_this.props.connection) {\n                _context2.next = 6;\n                break;\n              }\n\n              console.warn(\"onAuthStateChanged\");\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(firebase.db.collection(\"users\").doc(user.uid).get().then(function (user_db) {\n                var data = user_db.data();\n                user2[\"uid\"] = user.uid;\n                user2[\"email\"] = user.email;\n                user2[\"information\"] = data;\n                console.log(\"userr role in authstatechange----\", user2.information.role);\n\n                _this.props.setUser(user2);\n\n                var r = JSON.stringify(user2[\"information\"]);\n              }).then(function () {\n                if (user2.information.token == \"\") {\n                  _this.registerForPushNotificationsAsync();\n                }\n              }).catch(function (e) {\n                console.log(\"El error es \", e);\n              }));\n\n            case 6:\n              if (_this.state.initializing) {\n                _this.setState({\n                  initializing: false\n                });\n              }\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.syncCachedEndRoutines = function _callee4(list) {\n      var idRecord;\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              idRecord = \"\";\n              list.forEach(function _callee3(form, index) {\n                var res;\n                return _regeneratorRuntime.async(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        console.warn(\"form---\", form);\n                        console.warn(\"user----\", _this.props.user.uid);\n                        _context3.next = 4;\n                        return _regeneratorRuntime.awrap(firebase.db.collection(\"endRoutine\").add(_objectSpread(_objectSpread({}, form), {}, {\n                          day: _this.props.user.information.control.activeDay,\n                          week: _this.props.user.information.control.activeWeek,\n                          reportTime: new Date().getTime(),\n                          uid: _this.props.user.uid\n                        })));\n\n                      case 4:\n                        res = _context3.sent;\n                        idRecord = res.id;\n                        console.log(\"El id es \", idRecord);\n                        console.warn(\"length----\", list.length, \"-------- index---\", index);\n\n                        if (!(form.endRoutine === \"Si\")) {\n                          _context3.next = 12;\n                          break;\n                        }\n\n                        console.warn(\"in eyes\");\n                        _context3.next = 12;\n                        return _regeneratorRuntime.awrap(_this.updateControl(idRecord, form));\n\n                      case 12:\n                        if (!(index === list.length - 1)) {\n                          _context3.next = 16;\n                          break;\n                        }\n\n                        _context3.next = 15;\n                        return _regeneratorRuntime.awrap(firebase.db.collection(\"users\").doc(_this.props.user.uid).update(_defineProperty({}, \"medical.perceivedForce\", form.percivedEffort)));\n\n                      case 15:\n                        _this.props.clearCachedEndRoutines(0);\n\n                      case 16:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              });\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.updateControl = function _callee5(idRecord, form) {\n      var trainingPhase, activeWeek, activeDay, old_record, new_trainingPhase, new_activeWeek, new_activeDay, list, aux;\n      return _regeneratorRuntime.async(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              trainingPhase = _this.props.user.information.control.trainingPhase;\n              activeWeek = _this.props.user.information.control.activeWeek;\n              activeDay = _this.props.user.information.control.activeDay;\n              old_record = _this.props.user.information.control.record || [];\n              console.log(\"Los antiguos cambios son trainingPhase\", trainingPhase, \" activeWeek ,\", activeWeek, \"activeDay\", activeDay, old_record);\n              new_trainingPhase = \"\";\n              new_activeWeek = \"\";\n              new_activeDay = 0;\n\n              if (!(form.endRoutine == \"Si\")) {\n                _context5.next = 31;\n                break;\n              }\n\n              if (!(activeDay + 1 == 5)) {\n                _context5.next = 23;\n                break;\n              }\n\n              new_activeDay = 0;\n              new_activeWeek = \"week\" + (parseInt(activeWeek.replace(\"week\", \"\"), 10) - -1);\n\n              if (!(new_activeWeek == \"week11\")) {\n                _context5.next = 20;\n                break;\n              }\n\n              _context5.next = 15;\n              return _regeneratorRuntime.awrap(_this.sendCompletion());\n\n            case 15:\n              list = _context5.sent;\n              console.log(\"Finalizacion\");\n              new_trainingPhase = \"Finalizada\";\n              _context5.next = 21;\n              break;\n\n            case 20:\n              if (parseInt(new_activeWeek.replace(\"week\", \"\"), 10) <= 3) {\n                new_trainingPhase = \"Inicial\";\n              } else if (parseInt(new_activeWeek.replace(\"week\", \"\"), 10) <= 7) {\n                new_trainingPhase = \"Intermedia\";\n              } else {\n                new_trainingPhase = \"Avanzada\";\n              }\n\n            case 21:\n              _context5.next = 26;\n              break;\n\n            case 23:\n              new_activeDay = activeDay + 1;\n              new_trainingPhase = trainingPhase;\n              new_activeWeek = activeWeek;\n\n            case 26:\n              aux = old_record.push(idRecord);\n              console.log(idRecord, \"Los nuevos cambios son\", {\n                trainingPhase: new_trainingPhase,\n                activeDay: new_activeDay,\n                activeWeek: new_activeWeek,\n                record: old_record\n              });\n              _context5.next = 30;\n              return _regeneratorRuntime.awrap(firebase.db.collection(\"users\").doc(_this.props.user.uid).update({\n                control: {\n                  trainingPhase: new_trainingPhase,\n                  activeDay: new_activeDay,\n                  activeWeek: new_activeWeek,\n                  record: old_record\n                }\n              }).then(function (e) {\n                _this.props.updateUserControl({\n                  trainingPhase: new_trainingPhase,\n                  activeDay: new_activeDay,\n                  activeWeek: new_activeWeek,\n                  record: old_record\n                });\n              }));\n\n            case 30:\n              if (new_activeWeek == \"week11\") {\n                _this.props.navigation.navigate(\"SatisfactionSurvey\");\n              }\n\n            case 31:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.sendCompletion = function _callee6() {\n      return _regeneratorRuntime.async(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return _regeneratorRuntime.awrap(firebase.db.collection(\"users\").where(\"personal.email\", \"in\", [_this.props.user.information.companionEmail, _this.props.user.information.physioEmail]).get().then(function (querySnapshot) {\n                querySnapshot.forEach(function (doc) {\n                  _this.sendPushNotificationEnd(doc.data().token);\n                });\n              }).catch(function (error) {\n                console.log(\"Error getting documents: \", error);\n              }));\n\n            case 2:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.sendPushNotificationEnd = function _callee7(expoPushToken) {\n      var message;\n      return _regeneratorRuntime.async(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              message = {\n                to: expoPushToken,\n                sound: \"default\",\n                title: \"Rutina Finalizada!\" + props.user.information.personal.name,\n                data: {\n                  someData: \"goes here\"\n                }\n              };\n              _context7.next = 3;\n              return _regeneratorRuntime.awrap(fetch(\"https://exp.host/--/api/v2/push/send\", {\n                method: \"POST\",\n                headers: {\n                  Accept: \"application/json\",\n                  \"Accept-encoding\": \"gzip, deflate\",\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(message)\n              }));\n\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.logOut = function _callee8() {\n      return _regeneratorRuntime.async(function _callee8$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              Alert.alert(\"Cerrar Sesión\", \"¿Está seguro que quiere cerrar sesión? \", [{\n                text: \"Cancelar\",\n                onPress: function onPress() {},\n                style: \"cancel\"\n              }, {\n                text: \"Cerrar Sesión\",\n                onPress: function onPress() {\n                  return _regeneratorRuntime.async(function onPress$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          _this.props.navigation.navigate(\"Login\");\n\n                          _context8.next = 3;\n                          return _regeneratorRuntime.awrap(firebase.auth.signOut());\n\n                        case 3:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, null, null, null, Promise);\n                }\n              }], {\n                cancelable: false\n              });\n\n            case 1:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.userBody = function () {\n      return React.createElement(View, {\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          flexDirection: \"column\"\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 7\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.groupContainerBlue,\n        onPress: function onPress() {\n          _this.props.navigation.navigate(\"Repository\");\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.containerIcon,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }\n      }, React.createElement(BookOutline, {\n        name: \"book-outline\",\n        size: vmin(13),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: styles.containerText,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.tile1,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }\n      }, \"Cat\\xE1logo de Informaci\\xF3n\"), React.createElement(Text, {\n        style: styles.tile2,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }\n      }, \"Consultar colecci\\xF3n de informaci\\xF3n general, planes y restricciones\")), React.createElement(View, {\n        style: styles.arrowContainer,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }\n      }, React.createElement(NavigateNext, {\n        name: \"navigate-next\",\n        size: vmin(10),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }\n      }))), React.createElement(TouchableOpacity, {\n        style: styles.groupContainerOrange,\n        onPress: function onPress() {\n          AsyncStorage.getItem(\"persist:root\", function (err, result) {\n            console.warn(\"AsyncMap -- \", JSON.parse(result));\n          });\n\n          _this.props.navigation.navigate(\"ProfileScreen\", {\n            name: _this.props.user.information.personal.name\n          });\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.containerIcon,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }\n      }, React.createElement(Dumbbell, {\n        name: \"dumbbell\",\n        size: vmin(13),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: styles.containerText,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.tile1,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }\n      }, \"Plan de Ejercicios\"), React.createElement(Text, {\n        style: styles.tile2,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }\n      }, \"Consultar proceso personal del plan de ejercicios\")), React.createElement(View, {\n        style: styles.arrowContainer,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }\n      }, React.createElement(NavigateNext, {\n        name: \"navigate-next\",\n        size: vmin(10),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    _this.patientRegisterBody = function () {\n      console.warn(\"patient register pbofy=---\", _this.props.user);\n      return React.createElement(TouchableOpacity, {\n        style: [styles.greenGroupContainer, {\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\"\n        }],\n        onPress: function onPress() {\n          return _this.props.navigation.navigate(\"RegisterPatient\");\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.containerIcon,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 9\n        }\n      }, React.createElement(User_o, {\n        name: \"user-o\",\n        size: vmin(10),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: [styles.containerText, {\n          alignItems: \"center\"\n        }],\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.tile1,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 11\n        }\n      }, \"Continuar Registro\"), React.createElement(Text, {\n        style: [styles.tile2, {\n          width: \"85%\"\n        }],\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }\n      }, \"Usted ha sido identificado como usuario vinculado a una entidad. Por favor dar clic aqu\\xED para terminar su registro y acceder a la app.\")), React.createElement(View, {\n        style: styles.arrowContainer,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 9\n        }\n      }, React.createElement(NavigateNext, {\n        name: \"navigate-next\",\n        size: vmin(7),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }\n      })));\n    };\n\n    return _this;\n  }\n\n  _createClass(HomeScreen, [{\n    key: \"sendPushNotification\",\n    value: function sendPushNotification(token) {\n      var message;\n      return _regeneratorRuntime.async(function sendPushNotification$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              message = {\n                to: token,\n                sound: \"default\",\n                title: \"Cambio de Usuario\",\n                body: \"Ha sido vinculado a una entidad. Por favor ingrese a la app para finalizar su registro\",\n                data: {\n                  someData: \"goes here\"\n                }\n              };\n              _context10.next = 3;\n              return _regeneratorRuntime.awrap(fetch(\"https://exp.host/--/api/v2/push/send\", {\n                method: \"POST\",\n                headers: {\n                  Accept: \"application/json\",\n                  \"Accept-encoding\": \"gzip, deflate\",\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(message)\n              }));\n\n            case 3:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"sendStatusUpdateNotification\",\n    value: function sendStatusUpdateNotification() {\n      var _this2 = this;\n\n      var users;\n      return _regeneratorRuntime.async(function sendStatusUpdateNotification$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              _context11.next = 2;\n              return _regeneratorRuntime.awrap(firebase.db.collection(\"users\").where(\"role\", \"==\", \"paciente\").where(\"companionEmail\", \"==\", \"\").get());\n\n            case 2:\n              users = _context11.sent;\n              users.docs.map(function (user) {\n                return _this2.sendPushNotification(user.data().token);\n              });\n\n            case 4:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"checkAsync\",\n    value: function checkAsync() {\n      console.warn(\"checking\");\n      AsyncStorage.getAllKeys(function (err, keys) {\n        AsyncStorage.multiGet(keys, function (error, stores) {\n          stores == null ? void 0 : stores.map(function (result, i, store) {\n            console.log(\"saved data------\", _defineProperty({}, store[i][0], store[i][1]));\n            return true;\n          });\n        });\n      });\n    }\n  }, {\n    key: \"clearAllData\",\n    value: function clearAllData() {\n      AsyncStorage.getAllKeys().then(function (keys) {\n        return AsyncStorage.multiRemove(keys);\n      }).then(function () {\n        return Alert.alert(\"success\");\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (!this.state.initializing) {\n        var tempMounted = true;\n        this.props.user.information.role === \"\" ? tempMounted = false : tempMounted = true;\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate() {\n      return this.state.mounted;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.initializing) return React.createElement(View, {\n        style: {\n          backgroundColor: \"#ffffff\",\n          justifyContent: \"center\",\n          height: \"100%\",\n          width: \"100%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 9\n        }\n      }, React.createElement(ChargeScreen, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }\n      }));else if (typeof this.props.user.information == \"undefined\" || typeof this.props.user.information.personal.name == \"undefined\") {\n        return React.createElement(Login, {\n          navigation: this.props.navigation,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 14\n          }\n        });\n      } else if (this.props.user.information && this.props.user.information.personal && this.props.user.information.personal.name && this.props.user.information.role === \"\") {\n        return React.createElement(View, {\n          style: styles.container,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 9\n          }\n        }, React.createElement(View, {\n          style: styles.body,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 11\n          }\n        }, this.userBody()), React.createElement(View, {\n          style: styles.footer,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 11\n          }\n        }, this.props.connection && React.createElement(TouchableOpacity, {\n          style: styles.button,\n          onPress: function _callee9() {\n            return _regeneratorRuntime.async(function _callee9$(_context12) {\n              while (1) {\n                switch (_context12.prev = _context12.next) {\n                  case 0:\n                    _this3.props.navigation.navigate(\"UpdateInfo\");\n\n                  case 1:\n                  case \"end\":\n                    return _context12.stop();\n                }\n              }\n            }, null, null, null, Promise);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 15\n          }\n        }, React.createElement(Text, {\n          style: {\n            color: \"white\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 17\n          }\n        }, \"Editar Perfil\"))));\n      } else if (this.props.user.information && this.props.user.information.personal && this.props.user.information.personal.name && this.props.user.information.role == \"administrator\") {\n        return React.createElement(AdministratorHome, {\n          navigation: this.props.navigation,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 14\n          }\n        });\n      } else if (this.props.user.information && this.props.user.information.personal && this.props.user.information.personal.name && this.props.user.information.role == \"physiotherapist\") {\n        return React.createElement(HomePhysiotherapist, {\n          navigation: this.props.navigation,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 14\n          }\n        });\n      } else if (this.props.user.information && this.props.user.information.personal && this.props.user.information.personal.name && this.props.user.information.role == \"companion\") {\n        return React.createElement(CompanionHome, {\n          navigation: this.props.navigation,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 14\n          }\n        });\n      } else if (this.props.user.information && this.props.user.information.personal && this.props.user.information.personal.name) {\n        console.warn(\"patient ino=---\", this.props.user);\n        return React.createElement(View, {\n          style: styles.container,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 9\n          }\n        }, React.createElement(View, {\n          style: styles.body,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 11\n          }\n        }, this.props.user.information && this.props.user.information.role === \"paciente\" && this.props.user.information.medical && this.props.user.information.companionEmail === \"\" ? this.patientRegisterBody() : this.userBody()), React.createElement(View, {\n          style: styles.footer,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 11\n          }\n        }, this.props.connection && React.createElement(TouchableOpacity, {\n          style: styles.button,\n          onPress: function onPress() {\n            _this3.props.navigation.navigate(\"UpdatePatient\");\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 15\n          }\n        }, React.createElement(Text, {\n          style: {\n            color: \"white\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 17\n          }\n        }, \"Editar Perfil\"))));\n      } else if (false) {\n        return React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 655,\n            columnNumber: 14\n          }\n        }, \"No existen campos\");\n      } else {\n        return React.createElement(View, {\n          style: {\n            width: \"100%\",\n            height: \"100%\",\n            backgroundColor: \"white\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 9\n          }\n        }, React.createElement(ScrollView, {\n          style: {\n            flex: 1\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 11\n          }\n        }, React.createElement(StatusBar, {\n          barStyle: \"light-content\",\n          backgroundColor: this.props.connection ? \"blue\" : \"red\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 13\n          }\n        }), React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate(\"EndRoutine\", {\n              routineIsNotOver: false\n            });\n          },\n          style: {\n            backgroundColor: \"orange\",\n            height: 50,\n            borderRadius: 20,\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 15\n          }\n        }, \"End Routine\")), React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate(\"ScheduleRoutines\");\n          },\n          style: {\n            backgroundColor: \"orange\",\n            height: 50,\n            borderRadius: 20,\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 15\n          }\n        }, \"ScheduleRoutines\")), React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate(\"Login\");\n          },\n          style: {\n            backgroundColor: \"orange\",\n            height: 50,\n            borderRadius: 20,\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 15\n          }\n        }, \"Login\")), React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate(\"ReportEvent\");\n          },\n          style: {\n            backgroundColor: \"orange\",\n            height: 50,\n            borderRadius: 20,\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 15\n          }\n        }, \"ReportEvent\")), React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate(\"HomePhysiotherapist\");\n          },\n          style: {\n            backgroundColor: \"orange\",\n            height: 50,\n            borderRadius: 20,\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 726,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 15\n          }\n        }, \"HomePhysiotherapist\")), React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate(\"SatisfactionSurvey\");\n          },\n          style: {\n            backgroundColor: \"orange\",\n            height: 50,\n            borderRadius: 20,\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 753,\n            columnNumber: 15\n          }\n        }, \"SatisfactionSurvey\")), React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate(\"RecordTrainingData\");\n          },\n          style: {\n            backgroundColor: \"orange\",\n            height: 50,\n            borderRadius: 20,\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 768,\n            columnNumber: 15\n          }\n        }, \"RecordTrainingData\"))));\n      }\n    }\n  }]);\n\n  return HomeScreen;\n}(React.Component);\n\nvar MapStateToProps = function MapStateToProps(store) {\n  return {\n    connection: store.User.connection,\n    repoIndex: store.User.repoIndex,\n    user: store.User.user,\n    activityControlNotificationId: store.User.activityControlNotificationId,\n    ExerciseRoutine: store.DownloadReducer.ExerciseRoutine,\n    cachedEndRoutines: store.DownloadReducer.SavedEndRoutines,\n    updateStatus: store.User.updateStatus\n  };\n};\n\nvar MapDispatchToProps = function MapDispatchToProps(dispatch, store) {\n  return {\n    setConnection: function setConnection(value) {\n      return dispatch(actionsUser.SET_CONNECTION(value));\n    },\n    setUser: function setUser(val) {\n      return dispatch(actionsUser.SET_USER(val));\n    },\n    updateUserControl: function updateUserControl(data) {\n      return dispatch(actionsUser.UPDATE_USER_CONTROL(data));\n    },\n    clearCachedEndRoutines: function clearCachedEndRoutines(data) {\n      return dispatch(actionsDownload.CLEAR_END_ROUTINE(data));\n    }\n  };\n};\n\nexport default connect(MapStateToProps, MapDispatchToProps)(HomeScreen);\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    width: \"100%\",\n    height: \"100%\"\n  },\n  header: {\n    height: \"10%\",\n    width: \"90%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginLeft: \"5%\",\n    marginRight: \"5%\",\n    borderBottomColor: \"rgba(21, 21, 34, 1)\",\n    borderBottomWidth: 1\n  },\n  textHeader: {\n    fontSize: vmin(4),\n    fontStyle: \"italic\",\n    backgroundColor: \"#f5f5f5\",\n    width: \"100%\",\n    textAlign: \"center\",\n    marginTop: \"2%\"\n  },\n  button: {\n    backgroundColor: \"#6979F8\",\n    width: \"90%\",\n    height: \"60%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 5,\n    margin: \"5%\"\n  },\n  body: {\n    height: \"90%\",\n    width: \"100%\"\n  },\n  greenGroupContainer: {\n    width: \"100%\",\n    height: \"50%\",\n    marginTop: \"2%\",\n    flexDirection: \"row\",\n    borderBottomWidth: 1,\n    borderBottomColor: \"rgba(21, 21, 34, 1)\",\n    backgroundColor: \"rgba(174, 255, 145, 1)\"\n  },\n  containerIcon: {\n    width: \"25%\",\n    marginTop: \"3%\",\n    height: \"20%\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  groupContainerOrange: {\n    width: \"100%\",\n    height: \"50%\",\n    marginTop: \"2%\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"rgba(225, 126, 62,0.6)\"\n  },\n  groupContainerBlue: {\n    width: \"100%\",\n    height: \"50%\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"rgba(105,121,248,0.5)\"\n  },\n  containerText: {\n    width: \"100%\",\n    height: \"40%\",\n    justifyContent: \"center\"\n  },\n  tile1: {\n    fontSize: vmin(6),\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    color: \"#000000\",\n    marginBottom: vmin(1)\n  },\n  tile2: {\n    fontSize: vmin(4),\n    color: \"#000000\",\n    textAlign: \"center\"\n  },\n  arrowContainer: {\n    width: \"10%\",\n    height: \"20%\",\n    justifyContent: \"center\"\n  },\n  footer: {\n    height: \"10%\",\n    width: \"100%\"\n  }\n});","map":{"version":3,"sources":["C:/Users/dani1/Desktop/apptivate/src/components/screens/Home.tsx"],"names":["React","connect","actionsUser","NetInfo","firebase","AsyncStorage","Constants","Notifications","require","vmin","Login","NavigateNext","BookOutline","Dumbbell","User_o","CompanionHome","HomePhysiotherapist","AdministratorHome","actionsDownload","ChargeScreen","HomeScreen","props","state","appState","AppState","currentState","connection","publicUser","initializing","mounted","unsubscribe","checkNetInfo","fetch","then","setConnection","isConnected","setState","registerForPushNotificationsAsync","isDevice","getPermissionsAsync","existingStatus","status","finalStatus","requestPermissionsAsync","Alert","alert","getExpoPushTokenAsync","token","data","expoPushToken","db","collection","doc","auth","currentUser","uid","set","merge","res","Platform","OS","setNotificationChannelAsync","name","importance","AndroidImportance","MAX","vibrationPattern","lightColor","componentDidMount","cachedEndRoutines","empty","syncCachedEndRoutines","temp","onAuthStateChanged","error","console","warn","user","user2","email","get","user_db","log","information","role","setUser","r","JSON","stringify","catch","e","list","idRecord","forEach","form","index","add","day","control","activeDay","week","activeWeek","reportTime","Date","getTime","id","length","endRoutine","updateControl","update","percivedEffort","clearCachedEndRoutines","trainingPhase","old_record","record","new_trainingPhase","new_activeWeek","new_activeDay","parseInt","replace","sendCompletion","aux","push","updateUserControl","navigation","navigate","where","companionEmail","physioEmail","querySnapshot","sendPushNotificationEnd","message","to","sound","title","personal","someData","method","headers","Accept","body","logOut","text","onPress","style","signOut","cancelable","userBody","width","height","flexDirection","styles","groupContainerBlue","containerIcon","containerText","tile1","tile2","arrowContainer","groupContainerOrange","getItem","err","result","parse","patientRegisterBody","greenGroupContainer","alignItems","justifyContent","users","docs","map","sendPushNotification","getAllKeys","keys","multiGet","stores","i","store","multiRemove","tempMounted","backgroundColor","container","footer","button","color","medical","flex","routineIsNotOver","borderRadius","Component","MapStateToProps","User","repoIndex","activityControlNotificationId","ExerciseRoutine","DownloadReducer","SavedEndRoutines","updateStatus","MapDispatchToProps","dispatch","value","SET_CONNECTION","val","SET_USER","UPDATE_USER_CONTROL","CLEAR_END_ROUTINE","StyleSheet","create","header","marginLeft","marginRight","borderBottomColor","borderBottomWidth","textHeader","fontSize","fontStyle","textAlign","marginTop","margin","fontWeight","marginBottom"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport { Dispatch } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport * as MyTypes from \"../../redux/types/types\";\r\nimport { actionsUser } from \"../../redux/actions/actionsUser\";\r\n\r\nimport {\r\n  ScrollView,\r\n  View,\r\n  TouchableOpacity,\r\n  Text,\r\n  StatusBar,\r\n  ActivityIndicator,\r\n  StyleSheet,\r\n  Alert,\r\n} from \"react-native\";\r\n// import { fcmService } from \"../../services/FCMService\";\r\n// import { localNotificationService } from \"../../services/LocalNotificationService\";\r\nimport { AppState } from \"react-native\";\r\n// import SplashScreen from 'react-native-splash-screen';\r\n\r\nimport NetInfo from \"@react-native-community/netinfo\";\r\nimport firebase from \"../../../database/firebase\";\r\nimport * as Updates from \"expo-updates\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport Constants from \"expo-constants\";\r\nimport * as Notifications from \"expo-notifications\";\r\n\r\nvar { vmin } = require(\"react-native-expo-viewport-units\");\r\n\r\nimport Login from \"./Login\";\r\n\r\n// iconos\r\n\r\nimport NavigateNext from \"react-native-vector-icons/MaterialIcons\";\r\n\r\nimport BookOutline from \"react-native-vector-icons/Ionicons\";\r\n\r\nimport Dumbbell from \"react-native-vector-icons/MaterialCommunityIcons\";\r\n\r\nimport User_o from \"react-native-vector-icons/FontAwesome\";\r\n\r\nimport Download from \"react-native-vector-icons/Ionicons\";\r\n\r\nimport Settings from \"react-native-vector-icons/Ionicons\";\r\n\r\n// Pantalla del acompananate\r\nimport CompanionHome from \"../companion/CompanionHome\";\r\n\r\n// pantalla del fisioterapista\r\nimport HomePhysiotherapist from \"../Physiotherapist/HomePhysiotherapist\";\r\n\r\n// pantalla del administrador\r\nimport AdministratorHome from \"../Administrator/AdministratorHome\";\r\nimport GeneralProfileScreen from \"../cards/GeneralProfileScreen\";\r\nimport {\r\n  TourGuideZone, // Main wrapper of highlight component\r\n  TourGuideZoneByPosition, // Component to use mask on overlay (ie, position absolute)\r\n  useTourGuideController, // hook to start, etc.\r\n} from \"rn-tourguide\";\r\nimport { actionsDownload } from \"../../redux/actions/actionsDownload\";\r\nimport ChargeScreen from \"../Simple/ChargeScreen\";\r\n\r\ninterface Props {\r\n  setConnection: (value: any) => any;\r\n  connection: any;\r\n  setUser: (value: any) => any;\r\n  user: any;\r\n  activityControlNotificationId: any;\r\n}\r\n\r\nclass HomeScreen extends React.Component<Props> {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  state = {\r\n    appState: AppState.currentState,\r\n    connection: false,\r\n    publicUser: null,\r\n    initializing: true,\r\n    mounted: true,\r\n    unsubscribe: () => {},\r\n  };\r\n  checkNetInfo = () => {\r\n    NetInfo.fetch().then((state) => {\r\n      this.props.setConnection(state.isConnected);\r\n      this.setState({ connection: state.isConnected });\r\n    });\r\n  };\r\n  registerForPushNotificationsAsync = async () => {\r\n    try {\r\n      let token;\r\n      if (Constants.isDevice) {\r\n        const { status: existingStatus } =\r\n          await Notifications.getPermissionsAsync();\r\n        let finalStatus = existingStatus;\r\n        if (existingStatus !== \"granted\") {\r\n          const { status } = await Notifications.requestPermissionsAsync();\r\n          finalStatus = status;\r\n        }\r\n        if (finalStatus !== \"granted\") {\r\n          Alert.alert(\"Failed to get push token for push notification!\");\r\n          return;\r\n        }\r\n        token = (await Notifications.getExpoPushTokenAsync()).data;\r\n        //Alert.alert(token);\r\n        this.setState({ expoPushToken: token });\r\n      } else {\r\n        Alert.alert(\"Must use physical device for Push Notifications\");\r\n      }\r\n      const res = await firebase.db\r\n        .collection(\"users\")\r\n        .doc(firebase.auth.currentUser?.uid)\r\n        .set({ token }, { merge: true });\r\n\r\n      if (Platform.OS === \"android\") {\r\n        Notifications.setNotificationChannelAsync(\"default\", {\r\n          name: \"default\",\r\n          importance: Notifications.AndroidImportance.MAX,\r\n          vibrationPattern: [0, 250, 250, 250],\r\n          lightColor: \"#FF231F7C\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      //console.log(error);\r\n    }\r\n  };\r\n  async sendPushNotification(token) {\r\n    const message = {\r\n      to: token,\r\n      sound: \"default\",\r\n      title: \"Cambio de Usuario\",\r\n      body: \"Ha sido vinculado a una entidad. Por favor ingrese a la app para finalizar su registro\",\r\n      data: { someData: \"goes here\" },\r\n    };\r\n    await fetch(\"https://exp.host/--/api/v2/push/send\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Accept-encoding\": \"gzip, deflate\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(message),\r\n    });\r\n  }\r\n  async sendStatusUpdateNotification() {\r\n    const users = await firebase.db\r\n      .collection(\"users\")\r\n      .where(\"role\", \"==\", \"paciente\")\r\n      .where(\"companionEmail\", \"==\", \"\")\r\n      .get();\r\n    users.docs.map((user) => this.sendPushNotification(user.data().token));\r\n  }\r\n  checkAsync() {\r\n    console.warn(\"checking\");\r\n    AsyncStorage.getAllKeys((err, keys) => {\r\n      AsyncStorage.multiGet(keys, (error, stores) => {\r\n        stores?.map((result, i, store) => {\r\n          console.log(\"saved data------\", { [store[i][0]]: store[i][1] });\r\n          return true;\r\n        });\r\n      });\r\n    });\r\n  }\r\n  clearAllData() {\r\n    AsyncStorage.getAllKeys()\r\n      .then((keys) => AsyncStorage.multiRemove(keys))\r\n      .then(() => Alert.alert(\"success\"));\r\n  }\r\n  componentDidMount = () => {\r\n   // console.warn(\"mounted value------\", this.state.mounted);\r\n    try {\r\n      //this.checkAsync();\r\n      //console.warn(\"exercise Props++++++\", this.props.ExerciseRoutine)\r\n      if (!this.props.cachedEndRoutines.empty) {\r\n        this.syncCachedEndRoutines(this.props.cachedEndRoutines);\r\n      }\r\n      this.checkNetInfo();\r\n      //  console.warn(\"repo-----\", this.props.repoIndex)\r\n      if (this.state.mounted) {\r\n      //  console.warn(\"in is moutned mount-----\", this.props);\r\n        var temp = firebase.auth.onAuthStateChanged(this.onAuthStateChanged);\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"Home Error ---\", error);\r\n    }\r\n  //  console.warn(\"mounted value b4 return------\", this.state.mounted);\r\n    //  return () => {\r\n\r\n    //  }\r\n    //  mounted = false,\r\n    //   console.warn(\"mounted value return------\", mounted)};\r\n  };\r\n\r\n  componentDidUpdate() {\r\n    if (!this.state.initializing) {\r\n      let tempMounted = true;\r\n      this.props.user.information.role === \"\"\r\n        ? (tempMounted = false)\r\n        : (tempMounted = true);\r\n      // this.setState({ mounted: tempMounted})\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    // if (this.props.user.information.companionEmail !== \"\") {\r\n    //  // console.warn(\"in should update if\");\r\n    //   return true;\r\n    // }\r\n   // console.warn(\"should update------\", this.state.mounted);\r\n    return this.state.mounted;\r\n  }\r\n\r\n  // componentWillUnmount= () =>{\r\n  //   this.state.unsubscribe()\r\n  //   console.warn(\"unsubscribed\")\r\n\r\n  // }\r\n\r\n  onAuthStateChanged = async (user) => {\r\n    let user2 = {};\r\n    if (user && user.email !== \"\") {\r\n      // Si el usuario tiene una sesion activa se trae su informacion de la base de datos\r\n      if (this.props.connection) {\r\n        console.warn(\"onAuthStateChanged\");\r\n        await firebase.db\r\n          .collection(\"users\")\r\n          .doc(user.uid)\r\n          .get()\r\n          .then((user_db) => {\r\n            let data: any = user_db.data();\r\n            user2[\"uid\"] = user.uid;\r\n            user2[\"email\"] = user.email;\r\n            user2[\"information\"] = data;\r\n            console.log(\r\n              \"userr role in authstatechange----\",\r\n              user2.information.role\r\n            );\r\n            this.props.setUser(user2);\r\n            const r = JSON.stringify(user2[\"information\"]);\r\n          })\r\n          .then(() => {\r\n            if (user2.information.token == \"\") {\r\n              this.registerForPushNotificationsAsync();\r\n            }\r\n          })\r\n          .catch((e) => {\r\n            console.log(\"El error es \", e);\r\n          });\r\n      }\r\n    }\r\n    if (this.state.initializing) {\r\n      this.setState({ initializing: false });\r\n    }\r\n  };\r\n\r\n  syncCachedEndRoutines = async (list) => {\r\n    let idRecord = \"\";\r\n    list.forEach(async (form, index) => {\r\n      console.warn(\"form---\", form);\r\n      console.warn(\"user----\", this.props.user.uid);\r\n      let res = await firebase.db.collection(\"endRoutine\").add({\r\n        ...form,\r\n        day: this.props.user.information.control.activeDay,\r\n        week: this.props.user.information.control.activeWeek,\r\n        reportTime: new Date().getTime(),\r\n        uid: this.props.user.uid,\r\n      });\r\n      idRecord = res.id;\r\n      console.log(\"El id es \", idRecord);\r\n      console.warn(\"length----\", list.length, \"-------- index---\", index);\r\n      if (form.endRoutine === \"Si\") {\r\n        console.warn(\"in eyes\");\r\n        await this.updateControl(idRecord, form);\r\n      }\r\n      if (index === list.length - 1) {\r\n        await firebase.db\r\n          .collection(\"users\")\r\n          .doc(this.props.user.uid)\r\n          .update({\r\n            [\"medical.perceivedForce\"]: form.percivedEffort,\r\n          });\r\n        this.props.clearCachedEndRoutines(0);\r\n      }\r\n    });\r\n  };\r\n\r\n  updateControl = async (idRecord, form) => {\r\n    let trainingPhase = this.props.user.information.control.trainingPhase;\r\n    let activeWeek = this.props.user.information.control.activeWeek;\r\n    let activeDay = this.props.user.information.control.activeDay;\r\n    let old_record = this.props.user.information.control.record || [];\r\n\r\n    console.log(\r\n      \"Los antiguos cambios son trainingPhase\",\r\n      trainingPhase,\r\n      \" activeWeek ,\",\r\n      activeWeek,\r\n      \"activeDay\",\r\n      activeDay,\r\n      old_record\r\n    );\r\n    // Inicial\",\"Intermedia\",\"Avanzada\"\r\n\r\n    let new_trainingPhase = \"\";\r\n    let new_activeWeek = \"\";\r\n    let new_activeDay = 0;\r\n    if (form.endRoutine == \"Si\") {\r\n      if (activeDay + 1 == 5) {\r\n        new_activeDay = 0;\r\n        new_activeWeek =\r\n          \"week\" + (parseInt(activeWeek.replace(\"week\", \"\"), 10) - -1);\r\n\r\n        if (new_activeWeek == \"week11\") {\r\n          const list = await this.sendCompletion();\r\n          console.log(\"Finalizacion\");\r\n          new_trainingPhase = \"Finalizada\";\r\n        } else if (parseInt(new_activeWeek.replace(\"week\", \"\"), 10) <= 3) {\r\n          new_trainingPhase = \"Inicial\";\r\n        } else if (parseInt(new_activeWeek.replace(\"week\", \"\"), 10) <= 7) {\r\n          new_trainingPhase = \"Intermedia\";\r\n        } else {\r\n          new_trainingPhase = \"Avanzada\";\r\n        }\r\n      } else {\r\n        new_activeDay = activeDay + 1;\r\n        new_trainingPhase = trainingPhase;\r\n        new_activeWeek = activeWeek;\r\n      }\r\n\r\n      const aux = old_record.push(idRecord);\r\n\r\n      console.log(idRecord, \"Los nuevos cambios son\", {\r\n        trainingPhase: new_trainingPhase,\r\n        activeDay: new_activeDay,\r\n        activeWeek: new_activeWeek,\r\n        record: old_record,\r\n      });\r\n\r\n      await firebase.db\r\n        .collection(\"users\")\r\n        .doc(this.props.user.uid)\r\n        .update({\r\n          control: {\r\n            trainingPhase: new_trainingPhase,\r\n            activeDay: new_activeDay,\r\n            activeWeek: new_activeWeek,\r\n            record: old_record,\r\n          },\r\n        })\r\n        .then((e) => {\r\n          this.props.updateUserControl({\r\n            trainingPhase: new_trainingPhase,\r\n            activeDay: new_activeDay,\r\n            activeWeek: new_activeWeek,\r\n            record: old_record,\r\n          });\r\n        });\r\n\r\n      // Cuando se termina la semana 10 el contador aumneta y queda \"week11\" esto siginifica que acabo el protocolo\r\n      if (new_activeWeek == \"week11\") {\r\n        this.props.navigation.navigate(\"SatisfactionSurvey\");\r\n      }\r\n    }\r\n  };\r\n\r\n  sendCompletion = async () => {\r\n    await firebase.db\r\n      .collection(\"users\")\r\n      .where(\"personal.email\", \"in\", [\r\n        this.props.user.information.companionEmail,\r\n        this.props.user.information.physioEmail,\r\n      ])\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n          this.sendPushNotificationEnd(doc.data().token);\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error getting documents: \", error);\r\n      });\r\n  };\r\n\r\n  sendPushNotificationEnd = async (expoPushToken) => {\r\n    const message = {\r\n      to: expoPushToken,\r\n      sound: \"default\",\r\n      title: \"Rutina Finalizada!\" + props.user.information.personal.name,\r\n      data: { someData: \"goes here\" },\r\n    };\r\n\r\n    await fetch(\"https://exp.host/--/api/v2/push/send\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Accept-encoding\": \"gzip, deflate\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(message),\r\n    });\r\n  };\r\n\r\n  logOut = async () => {\r\n    //this.props.navigation.navigate(\"Login\");\r\n    //await firebase.auth.signOut();\r\n\r\n    // this.checkAsync();\r\n    Alert.alert(\r\n      \"Cerrar Sesión\",\r\n      \"¿Está seguro que quiere cerrar sesión? \",\r\n      [\r\n        {\r\n          text: \"Cancelar\",\r\n          onPress: () => {},\r\n          style: \"cancel\",\r\n        },\r\n        {\r\n          text: \"Cerrar Sesión\",\r\n          onPress: async () => {\r\n            this.props.navigation.navigate(\"Login\");\r\n            await firebase.auth.signOut();\r\n          },\r\n        },\r\n      ],\r\n      { cancelable: false }\r\n    );\r\n  };\r\n\r\n  userBody = () => {\r\n    return (\r\n      <View style={{ width: \"100%\", height: \"100%\", flexDirection: \"column\" }}>\r\n        {/* <TourGuideZone\r\n            zone={1}\r\n            text=\"La información esta organizada por categoría. Con las flechas de los lados se puede mover por las categorías.\"\r\n            borderRadius={16}\r\n          > */}\r\n        <TouchableOpacity\r\n          style={styles.groupContainerBlue}\r\n          onPress={() => {\r\n            this.props.navigation.navigate(\"Repository\");\r\n          }}\r\n        >\r\n          <View style={styles.containerIcon}>\r\n            <BookOutline name=\"book-outline\" size={vmin(13)} />\r\n          </View>\r\n\r\n          <View style={styles.containerText}>\r\n            <Text style={styles.tile1}>Catálogo de Información</Text>\r\n            <Text style={styles.tile2}>\r\n              Consultar colección de información general, planes y restricciones\r\n            </Text>\r\n          </View>\r\n\r\n          <View style={styles.arrowContainer}>\r\n            <NavigateNext name=\"navigate-next\" size={vmin(10)} />\r\n          </View>\r\n        </TouchableOpacity>\r\n        {/* </TourGuideZone> */}\r\n        <TouchableOpacity\r\n          style={styles.groupContainerOrange}\r\n          onPress={() => {\r\n            AsyncStorage.getItem(\"persist:root\", (err, result) => {\r\n              console.warn(\"AsyncMap -- \", JSON.parse(result));\r\n            });\r\n            //  <GeneralProfileScreen props={props} />\r\n            this.props.navigation.navigate(\"ProfileScreen\", {\r\n              name: this.props.user.information.personal.name,\r\n            });\r\n          }}\r\n        >\r\n          <View style={styles.containerIcon}>\r\n            <Dumbbell name=\"dumbbell\" size={vmin(13)} />\r\n          </View>\r\n\r\n          <View style={styles.containerText}>\r\n            <Text style={styles.tile1}>Plan de Ejercicios</Text>\r\n            <Text style={styles.tile2}>\r\n              Consultar proceso personal del plan de ejercicios\r\n            </Text>\r\n          </View>\r\n\r\n          <View style={styles.arrowContainer}>\r\n            <NavigateNext name=\"navigate-next\" size={vmin(10)} />\r\n          </View>\r\n        </TouchableOpacity>\r\n\r\n        {/* <TouchableOpacity\r\n          style={styles.groupContainer}\r\n          onPress={() => this.props.navigation.navigate(\"UpdatePatient\")}\r\n        >\r\n          <View style={styles.containerIcon}>\r\n            <Settings name=\"settings-outline\" size={vmin(10)} />\r\n          </View>\r\n\r\n          <View style={styles.containerText}>\r\n            <Text style={styles.tile1}>Actualizar Datos</Text>\r\n            <Text style={styles.tile2}>Cambiar datos personales</Text>\r\n          </View>\r\n\r\n          <View style={styles.arrowContainer}>\r\n            <NavigateNext name=\"navigate-next\" size={vmin(7)} />\r\n          </View>\r\n        </TouchableOpacity> */}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  patientRegisterBody = () => {\r\n    console.warn(\"patient register pbofy=---\", this.props.user);\r\n    return (\r\n      <TouchableOpacity\r\n        style={[\r\n          styles.greenGroupContainer,\r\n          {\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          },\r\n        ]}\r\n        onPress={() => this.props.navigation.navigate(\"RegisterPatient\")}\r\n      >\r\n        <View style={styles.containerIcon}>\r\n          <User_o name=\"user-o\" size={vmin(10)} />\r\n        </View>\r\n        <View style={[styles.containerText, { alignItems: \"center\" }]}>\r\n          <Text style={styles.tile1}>Continuar Registro</Text>\r\n          <Text style={[styles.tile2, { width: \"85%\" }]}>\r\n            Usted ha sido identificado como usuario vinculado a una entidad. Por\r\n            favor dar clic aquí para terminar su registro y acceder a la app.\r\n          </Text>\r\n        </View>\r\n        <View style={styles.arrowContainer}>\r\n          <NavigateNext name=\"navigate-next\" size={vmin(7)} />\r\n        </View>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    \r\n    if (this.state.initializing)\r\n      return (\r\n        <View\r\n          style={{\r\n            backgroundColor: \"#ffffff\",\r\n            justifyContent: \"center\",\r\n            height: \"100%\",\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          <ChargeScreen />\r\n        </View>\r\n      );\r\n    else if (\r\n      typeof this.props.user.information == \"undefined\" ||\r\n      typeof this.props.user.information.personal.name == \"undefined\"\r\n    ) {\r\n      return <Login navigation={this.props.navigation} />;\r\n    } else if (\r\n      // false &&\r\n      this.props.user.information &&\r\n      this.props.user.information.personal &&\r\n      this.props.user.information.personal.name &&\r\n      this.props.user.information.role === \"\"\r\n    ) {\r\n      return (\r\n        <View style={styles.container}>\r\n          <View style={styles.body}>{this.userBody()}</View>\r\n          <View style={styles.footer}>\r\n            {this.props.connection && (\r\n              <TouchableOpacity\r\n                style={styles.button}\r\n                onPress={async () => {\r\n                //this.clearAllData()\r\n                 this.props.navigation.navigate(\"UpdateInfo\");\r\n                  //this.checkAsync();\r\n                  // this.logOut();\r\n                }}\r\n              >\r\n                <Text style={{ color: \"white\" }}>Editar Perfil</Text>\r\n              </TouchableOpacity>\r\n            )}\r\n          </View>\r\n        </View>\r\n      );\r\n    } else if (\r\n      // false &&\r\n      this.props.user.information &&\r\n      this.props.user.information.personal &&\r\n      this.props.user.information.personal.name &&\r\n      this.props.user.information.role == \"administrator\"\r\n    ) {\r\n      return <AdministratorHome navigation={this.props.navigation} />;\r\n    } else if (\r\n      // false &&\r\n      this.props.user.information &&\r\n      this.props.user.information.personal &&\r\n      this.props.user.information.personal.name &&\r\n      this.props.user.information.role == \"physiotherapist\"\r\n    ) {\r\n      return <HomePhysiotherapist navigation={this.props.navigation} />;\r\n    } else if (\r\n      // false &&\r\n      this.props.user.information &&\r\n      this.props.user.information.personal &&\r\n      this.props.user.information.personal.name &&\r\n      this.props.user.information.role == \"companion\"\r\n    ) {\r\n      return <CompanionHome navigation={this.props.navigation} />;\r\n    } else if (\r\n      // false &&\r\n      this.props.user.information &&\r\n      this.props.user.information.personal &&\r\n      this.props.user.information.personal.name\r\n    ) {\r\n      console.warn(\"patient ino=---\", this.props.user);\r\n      return (\r\n        <View style={styles.container}>\r\n          {/* <View style={styles.header}>\r\n            <Text style={{ fontWeight: \"bold\" }}>\r\n              Hola {this.props.user.information.personal.name}\r\n            </Text>\r\n            <Text style={styles.textHeader}>\r\n              Utiliza el menu para navegar por la app\r\n            </Text>\r\n          </View> */}\r\n          <View style={styles.body}>\r\n            {this.props.user.information &&\r\n            this.props.user.information.role === \"paciente\" &&\r\n            this.props.user.information.medical &&\r\n            this.props.user.information.companionEmail === \"\"\r\n              ? this.patientRegisterBody()\r\n              : this.userBody()}\r\n          </View>\r\n\r\n          <View style={styles.footer}>\r\n            {this.props.connection && (\r\n              <TouchableOpacity\r\n                style={styles.button}\r\n                onPress={() => {\r\n                  //this.clearAllData()\r\n                  this.props.navigation.navigate(\"UpdatePatient\");\r\n                  //this.checkAsync();\r\n                  // this.logOut();\r\n                }}\r\n              >\r\n                <Text style={{ color: \"white\" }}>Editar Perfil</Text>\r\n              </TouchableOpacity>\r\n            )}\r\n          </View>\r\n        </View>\r\n      );\r\n    } else if (false) {\r\n      return <Text>No existen campos</Text>;\r\n    } else {\r\n      return (\r\n        <View\r\n          style={{ width: \"100%\", height: \"100%\", backgroundColor: \"white\" }}\r\n        >\r\n          <ScrollView\r\n            style={{\r\n              flex: 1,\r\n            }}\r\n          >\r\n            <StatusBar\r\n              barStyle=\"light-content\"\r\n              backgroundColor={this.props.connection ? \"blue\" : \"red\"}\r\n            />\r\n            <TouchableOpacity\r\n              onPress={() =>\r\n                this.props.navigation.navigate(\"EndRoutine\", {\r\n                  routineIsNotOver: false,\r\n                })\r\n              }\r\n              style={{\r\n                backgroundColor: \"orange\",\r\n                height: 50,\r\n                borderRadius: 20,\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Text>End Routine</Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n              onPress={() => this.props.navigation.navigate(\"ScheduleRoutines\")}\r\n              style={{\r\n                backgroundColor: \"orange\",\r\n                height: 50,\r\n                borderRadius: 20,\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Text>ScheduleRoutines</Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n              onPress={() => this.props.navigation.navigate(\"Login\")}\r\n              style={{\r\n                backgroundColor: \"orange\",\r\n                height: 50,\r\n                borderRadius: 20,\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Text>Login</Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n              onPress={() => this.props.navigation.navigate(\"ReportEvent\")}\r\n              style={{\r\n                backgroundColor: \"orange\",\r\n                height: 50,\r\n                borderRadius: 20,\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Text>ReportEvent</Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n              onPress={() =>\r\n                this.props.navigation.navigate(\"HomePhysiotherapist\")\r\n              }\r\n              style={{\r\n                backgroundColor: \"orange\",\r\n                height: 50,\r\n                borderRadius: 20,\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Text>HomePhysiotherapist</Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n              onPress={() =>\r\n                this.props.navigation.navigate(\"SatisfactionSurvey\")\r\n              }\r\n              style={{\r\n                backgroundColor: \"orange\",\r\n                height: 50,\r\n                borderRadius: 20,\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Text>SatisfactionSurvey</Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n              onPress={() =>\r\n                this.props.navigation.navigate(\"RecordTrainingData\")\r\n              }\r\n              style={{\r\n                backgroundColor: \"orange\",\r\n                height: 50,\r\n                borderRadius: 20,\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Text>RecordTrainingData</Text>\r\n            </TouchableOpacity>\r\n          </ScrollView>\r\n        </View>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst MapStateToProps = (store: MyTypes.ReducerState) => {\r\n  //Alert.alert(\"-------\",\r\n  //  store.User.user.information ,\r\n  //);\r\n  //console.warn(\"Store-------\",store.User.repoIndex);\r\n  //console.warn(\"cached end----\", store.DownloadReducer.SavedEndRoutines);\r\n  //#FFE723\r\n  return {\r\n    connection: store.User.connection,\r\n    repoIndex: store.User.repoIndex,\r\n    user: store.User.user,\r\n    activityControlNotificationId: store.User.activityControlNotificationId,\r\n    ExerciseRoutine: store.DownloadReducer.ExerciseRoutine,\r\n    cachedEndRoutines: store.DownloadReducer.SavedEndRoutines,\r\n    updateStatus: store.User.updateStatus,\r\n  };\r\n};\r\n\r\nconst MapDispatchToProps = (dispatch: Dispatch, store: any) => ({\r\n  setConnection: (value) => dispatch(actionsUser.SET_CONNECTION(value)),\r\n  setUser: (val) => dispatch(actionsUser.SET_USER(val)),\r\n  updateUserControl: (data) => dispatch(actionsUser.UPDATE_USER_CONTROL(data)),\r\n  clearCachedEndRoutines: (data) =>\r\n    dispatch(actionsDownload.CLEAR_END_ROUTINE(data)),\r\n});\r\nexport default connect(MapStateToProps, MapDispatchToProps)(HomeScreen);\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { backgroundColor: \"white\", width: \"100%\", height: \"100%\" },\r\n  header: {\r\n    height: \"10%\",\r\n    width: \"90%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginLeft: \"5%\",\r\n    marginRight: \"5%\",\r\n    borderBottomColor: \"rgba(21, 21, 34, 1)\",\r\n    borderBottomWidth: 1,\r\n  },\r\n  textHeader: {\r\n    fontSize: vmin(4),\r\n    fontStyle: \"italic\",\r\n    backgroundColor: \"#f5f5f5\",\r\n    width: \"100%\",\r\n    textAlign: \"center\",\r\n    marginTop: \"2%\",\r\n  },\r\n\r\n  button: {\r\n    backgroundColor: \"#6979F8\",\r\n    width: \"90%\",\r\n    height: \"60%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 5,\r\n    margin: \"5%\",\r\n  },\r\n\r\n  body: {\r\n    height: \"90%\",\r\n    width: \"100%\",\r\n    // backgroundColor:\"gren\"\r\n  },\r\n\r\n  greenGroupContainer: {\r\n    width: \"100%\",\r\n    height: \"50%\",\r\n    marginTop: \"2%\",\r\n    flexDirection: \"row\",\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"rgba(21, 21, 34, 1)\",\r\n    backgroundColor: \"rgba(174, 255, 145, 1)\",\r\n  },\r\n\r\n  containerIcon: {\r\n    width: \"25%\",\r\n    // backgroundColor:\"gray\",\r\n    marginTop: \"3%\",\r\n    height: \"20%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  groupContainerOrange: {\r\n    width: \"100%\",\r\n    height: \"50%\",\r\n    marginTop: \"2%\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    //  borderBottomWidth: 1,\r\n    backgroundColor: \"rgba(225, 126, 62,0.6)\",\r\n    // backgroundColor:\"rgba(251, 224, 168,0.5)\",\r\n    //backgroundColor: \"rgba(250, 234, 5, 0.5)\",\r\n    //  borderBottomColor: \"rgba(21, 21, 34, 1)\",\r\n  },\r\n  groupContainerBlue: {\r\n    width: \"100%\",\r\n    height: \"50%\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    //borderBottomWidth: 1,\r\n    backgroundColor: \"rgba(105,121,248,0.5)\",\r\n    //   borderBottomColor: \"rgba(21, 21, 34, 1)\",\r\n  },\r\n  containerText: {\r\n    width: \"100%\",\r\n    // backgroundColor:\"yellow\",\r\n    height: \"40%\",\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  tile1: {\r\n    fontSize: vmin(6),\r\n    fontWeight: \"bold\",\r\n    textAlign: \"center\",\r\n    color: \"#000000\",\r\n    marginBottom: vmin(1),\r\n  },\r\n\r\n  tile2: {\r\n    fontSize: vmin(4),\r\n    color: \"#000000\",\r\n    textAlign: \"center\",\r\n    // color: \"background: rgba(153, 153, 153, 1)\",\r\n  },\r\n\r\n  arrowContainer: {\r\n    width: \"10%\",\r\n    //backgroundColor:\"salmon\",\r\n    height: \"20%\",\r\n    justifyContent: \"center\",\r\n  },\r\n\r\n  footer: {\r\n    height: \"10%\",\r\n    width: \"100%\",\r\n    // backgroundColor:\"peru\"\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}