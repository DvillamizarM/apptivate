{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\dani1\\\\Desktop\\\\apptivate\\\\src\\\\components\\\\companion\\\\PatientProfileScreen.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\n\nvar _require = require(\"react-native-expo-viewport-units\"),\n    vmin = _require.vmin;\n\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from \"react-native-responsive-screen\";\nimport ScalableText from \"react-native-text\";\nimport { connect } from \"react-redux\";\nimport { actionsUser } from \"../../redux/actions/actionsUser\";\nimport firebase from \"../../../database/firebase\";\nimport { AnimatedCircularProgress } from \"react-native-circular-progress\";\n\nvar GeneralProfileScreen = function GeneralProfileScreen(props) {\n  console.warn(\"profile patient----------\", props.navigation.state);\n  var trainingPhase = \"\";\n  var activeWeek = \"\";\n  var activeDay = 0;\n  var width = \"\";\n\n  var _useState = useState({\n    loading: true\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      userInformation = _useState2[0],\n      setUserInformation = _useState2[1];\n\n  var info = {};\n  console.warn(\"props---\", props.navigation.state.params.uid);\n\n  var getInformation = function getInformation() {\n    var patientIdentifier, record;\n    return _regeneratorRuntime.async(function getInformation$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            patientIdentifier = props.navigation.state.params.uid;\n            console.log(\"{}{}{}{}P{}{}{}{}{}{}{}{}{}}el id del paciente que llegas es \", patientIdentifier);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(firebase.db.collection(\"users\").doc(patientIdentifier).get().then(function (user) {\n              info = user.data();\n              info[\"loading\"] = false;\n              console.log(\"La informaicon qudo asi ;\", info);\n            }).catch(function (e) {}));\n\n          case 4:\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(firebase.db.collection(\"endRoutine\").where(\"uid\", \"==\", patientIdentifier).get());\n\n          case 6:\n            record = _context.sent;\n            info[\"record\"] = filterRecord(record);\n            console.log(\"La informacion es :::::::::::: :::::::::::: :::::::::::: :::::::::::: ::::::::::::\", info);\n            setUserInformation(info);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var filterRecord = function filterRecord(collection) {\n    var record = {};\n    collection.docs.forEach(function (doc, index) {\n      console.warn(\"Esta es la iteracion numerooooooooooooooooooooooooooooooooooooo\", index, record);\n\n      var currentDocument = _objectSpread(_objectSpread({}, doc.data()), {}, {\n        id: doc.id\n      });\n\n      var activeWeek = currentDocument.week;\n      var activeDay = currentDocument.day;\n      var trainingPhase = \"\";\n\n      if (parseInt(activeWeek.replace(\"week\", \"\"), 10) <= 3) {\n        trainingPhase = \"Fase Inicial\";\n      } else if (parseInt(activeWeek.replace(\"week\", \"\"), 10) <= 7) {\n        trainingPhase = \"Fase Intermedia\";\n      } else {\n        trainingPhase = \"Fase Avanzada\";\n      }\n\n      if (record[trainingPhase]) {\n        console.log(\"Aqui la fase ya habia sido creada aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\", record);\n\n        if (record[trainingPhase][activeWeek]) {\n          console.table(\"Aqui la semana 1 ya existia \", record);\n\n          if (record[trainingPhase][activeWeek][activeDay] != 0) {\n            record[trainingPhase][activeWeek][activeDay].push(_objectSpread({}, currentDocument));\n          } else {\n              record[trainingPhase][activeWeek][activeDay] = [_objectSpread({}, currentDocument)];\n            }\n        } else {\n            console.log(\"La semana no existia \", record);\n            record[trainingPhase][activeWeek] = [0, 0, 0, 0, 0, 0, 0];\n            record[trainingPhase][activeWeek][activeDay] = [_objectSpread({}, currentDocument)];\n          }\n      } else {\n          record[trainingPhase] = {};\n          record[trainingPhase][activeWeek] = [0, 0, 0, 0, 0, 0, 0];\n          record[trainingPhase][activeWeek][activeDay] = [_objectSpread({}, currentDocument)];\n        }\n    });\n    console.log(\"======= El resuldato de la semana es :\", record);\n    return record;\n  };\n\n  props.user.information.role == \"paciente\" ? width = \"42%\" : width = \"84%\";\n  trainingPhase = props.navigation.state.params.trainingPhase;\n  activeWeek = props.navigation.state.params.activeWeek;\n  activeDay = props.navigation.state.params.activeDay;\n\n  if (parseInt(activeWeek.replace(\"week\", \"\"), 10) == 1 && trainingPhase == \"Inicial\" && activeDay == 0) {\n    var trainingPhasePercentage = 0;\n    var activeWeekPercentage = 0;\n    var activeDayPercentage = 0;\n  } else {\n    var weekkk = String(parseInt(activeWeek.replace(\"week\", \"\")) - 1);\n    var activeWeekPercentage = parseInt(weekkk, 10) * 10;\n    var activeDayPercentage = activeDay * 20;\n    console.warn(\"day---\", activeDay);\n    var trainingPhasePercentage = parseInt(activeWeek.replace(\"week\", \"\")) > 4 ? 30 : parseInt(activeWeek.replace(\"week\", \"\")) > 7 ? 60 : parseInt(activeWeek.replace(\"week\", \"\")) > 9 ? 90 : 0;\n  }\n\n  if (trainingPhasePercentage == 110) {\n    trainingPhasePercentage = 100;\n  }\n\n  if (activeWeekPercentage == 110) {\n    trainingPhasePercentage = 100;\n    activeWeekPercentage = 100;\n  }\n\n  if (activeDayPercentage == 110) {\n    activeDayPercentage = 100;\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.rowButtons,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return props.navigation.navigate(\"PatientEvent\", {\n        uid: props.navigation.state.params.uid\n      });\n    },\n    style: [styles.button, {\n      width: width,\n      backgroundColor: \"white\",\n      borderColor: \"#6979F8\",\n      borderWidth: vmin(0.3)\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, React.createElement(ScalableText, {\n    style: {\n      color: \"#6979F8\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, \"Reportar Incidente\"))), React.createElement(TouchableOpacity, {\n    onPress: function _callee() {\n      var myPromise;\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              myPromise = new Promise(function (resolve, reject) {\n                resolve(getInformation());\n              });\n              myPromise.then(function () {\n                console.warn(\"usring---\", info);\n                props.navigation.navigate(\"PatientHistory\", {\n                  userInformation: info\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    },\n    style: styles.progressContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: vmin(5),\n      fontWeight: \"bold\",\n      width: \"100%\",\n      textAlign: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, \"Control\"), React.createElement(Text, {\n    style: {\n      fontSize: vmin(3),\n      width: \"80%\",\n      textAlign: \"center\",\n      marginBottom: \"2%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }\n  }, \"Los porcentajas se calculan autom\\xE1ticamente con base a su progreso en el plan.\"), React.createElement(View, {\n    style: styles.progressSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.progressSection_texts,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: vmin(4),\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, \"Plan de Ejercicios\"), React.createElement(Text, {\n    style: {\n      fontSize: vmin(3.5),\n      color: \"rgba(153, 153, 153, 1)\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, \"Fase \", trainingPhase)), React.createElement(View, {\n    style: styles.progressSection_circle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 11\n    }\n  }, React.createElement(AnimatedCircularProgress, {\n    size: vmin(23),\n    width: vmin(2),\n    fill: trainingPhasePercentage,\n    tintColor: \"#6979F8\",\n    backgroundColor: \"rgba(228, 228, 228, 1)\",\n    rotation: 0,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }, function (fill) {\n    return React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 26\n      }\n    }, trainingPhasePercentage, \"%\");\n  }))), React.createElement(View, {\n    style: styles.progressSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.progressSection_texts,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: vmin(4),\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }, \"Semana del Plan\"), React.createElement(Text, {\n    style: {\n      fontSize: vmin(3.5),\n      color: \"rgba(153, 153, 153, 1)\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }\n  }, \"Semana \", (activeWeekPercentage + 10) / 10, \" de 10\")), React.createElement(View, {\n    style: styles.progressSection_circle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 11\n    }\n  }, React.createElement(AnimatedCircularProgress, {\n    size: vmin(23),\n    width: vmin(2),\n    fill: activeWeekPercentage,\n    tintColor: \"#6979F8\",\n    backgroundColor: \"rgba(228, 228, 228, 1)\",\n    rotation: 0,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }, function (fill) {\n    return React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 26\n      }\n    }, activeWeekPercentage, \"%\");\n  }))), React.createElement(View, {\n    style: styles.progressSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.progressSection_texts,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: vmin(4),\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }, \"Dia de la Semana\"), React.createElement(Text, {\n    style: {\n      fontSize: vmin(3.5),\n      color: \"rgba(153, 153, 153, 1)\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }\n  }, \"Dia \", (activeDayPercentage + 20) / 20, \" de 5\")), React.createElement(View, {\n    style: styles.progressSection_circle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 11\n    }\n  }, React.createElement(AnimatedCircularProgress, {\n    size: vmin(23),\n    width: vmin(2),\n    fill: activeDayPercentage,\n    tintColor: \"#6979F8\",\n    backgroundColor: \"rgba(228, 228, 228, 1)\",\n    rotation: 0,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }\n  }, function (fill) {\n    return React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 26\n      }\n    }, activeDayPercentage, \"%\");\n  })))), props.user.information.role == \"paciente\" ? React.createElement(View, {\n    style: styles.footerButtons,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 9\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.button2,\n    onPress: function onPress() {\n      return props.navigation.navigate(\"ScheduleRoutines\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 11\n    }\n  }, React.createElement(ScalableText, {\n    style: {\n      color: \"white\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 13\n    }\n  }, \"Configurar alarmas de la rutina semanal\")), React.createElement(TouchableOpacity, {\n    style: styles.button2,\n    onPress: function onPress() {\n      return props.props.navigation.navigate(\"CustomizeRoutine\", {\n        btnText: \"Guardar\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 11\n    }\n  }, React.createElement(ScalableText, {\n    style: {\n      color: \"white\",\n      fontWeight: \"bold\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }\n  }, \"Editar intensidad y tiempo de reposo\"))) : console.log(\"gfd\"));\n};\n\nvar MapStateToProps = function MapStateToProps(store) {\n  console.warn(\"storeee---\", store.DownloadReducer.ExerciseRoutineIndentifiers);\n  return {\n    user: store.User.user,\n    connection: store.User.connection,\n    donwloaded: store.DownloadReducer.ExerciseRoutineIndentifiers\n  };\n};\n\nvar MapDispatchToProps = function MapDispatchToProps(dispatch, store) {\n  return {\n    setUser: function setUser(val) {\n      return dispatch(actionsUser.SET_USER(val));\n    }\n  };\n};\n\nexport default connect(MapStateToProps, MapDispatchToProps)(GeneralProfileScreen);\nvar styles = StyleSheet.create({\n  container: {\n    maxWidth: wp(\"100%\"),\n    maxHeight: hp(\"100%\"),\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"white\"\n  },\n  rowButtons: {\n    width: \"100%\",\n    height: \"10%\",\n    marginTop: \"3%\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\",\n    flexDirection: \"row\"\n  },\n  button: {\n    width: \"42%\",\n    height: \"90%\",\n    backgroundColor: \"#6979F8\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 5\n  },\n  button2: {\n    width: \"90%\",\n    height: \"40%\",\n    marginBottom: \"4%\",\n    backgroundColor: \"#6979F8\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 5\n  },\n  containerHeader: {\n    width: \"100%\",\n    height: \"10%\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  progressContainer: {\n    width: \"95%\",\n    height: \"85%\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\",\n    marginTop: \"3%\",\n    borderRadius: 10,\n    backgroundColor: \"rgba(93,93,93,0.1)\"\n  },\n  footerButtons: {\n    width: \"100%\",\n    height: \"20%\",\n    marginTop: \"4%\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\"\n  },\n  containerButton: {\n    height: \"10%\",\n    width: \"100%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: vmin(2)\n  },\n  progressSection: {\n    width: \"90%\",\n    height: \"24%\",\n    backgroundColor: \"white\",\n    marginBottom: \"2%\",\n    borderRadius: 10,\n    flexDirection: \"row\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 7\n    },\n    shadowOpacity: 0.41,\n    shadowRadius: 9.11,\n    elevation: 14\n  },\n  progressSection_texts: {\n    height: \"100%\",\n    width: \"65%\",\n    justifyContent: \"space-evenly\",\n    paddingLeft: \"5%\"\n  },\n  progressSection_circle: {\n    height: \"100%\",\n    width: \"35%\",\n    marginBottom: \"5%\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"sources":["C:/Users/dani1/Desktop/apptivate/src/components/companion/PatientProfileScreen.tsx"],"names":["React","useState","require","vmin","widthPercentageToDP","wp","heightPercentageToDP","hp","ScalableText","connect","actionsUser","firebase","AnimatedCircularProgress","GeneralProfileScreen","props","console","warn","navigation","state","trainingPhase","activeWeek","activeDay","width","loading","userInformation","setUserInformation","info","params","uid","getInformation","patientIdentifier","log","db","collection","doc","get","then","user","data","catch","e","where","record","filterRecord","docs","forEach","index","currentDocument","id","week","day","parseInt","replace","table","push","information","role","trainingPhasePercentage","activeWeekPercentage","activeDayPercentage","weekkk","String","styles","container","rowButtons","navigate","button","backgroundColor","borderColor","borderWidth","color","fontWeight","myPromise","Promise","resolve","reject","progressContainer","fontSize","textAlign","marginBottom","progressSection","progressSection_texts","progressSection_circle","fill","footerButtons","button2","btnText","MapStateToProps","store","DownloadReducer","ExerciseRoutineIndentifiers","User","connection","donwloaded","MapDispatchToProps","dispatch","setUser","val","SET_USER","StyleSheet","create","maxWidth","maxHeight","justifyContent","alignItems","height","marginTop","flexDirection","borderRadius","containerHeader","containerButton","padding","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","paddingLeft"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\r\nimport { View, StyleSheet, Text, TouchableOpacity, Alert } from \"react-native\";\r\n\r\nvar { vmin } = require(\"react-native-expo-viewport-units\");\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from \"react-native-responsive-screen\";\r\n\r\nimport ScalableText from \"react-native-text\";\r\n// redux\r\n\r\nimport { Dispatch } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport * as MyTypes from \"../../redux/types/types\";\r\nimport { actionsUser } from \"../../redux/actions/actionsUser\";\r\nimport firebase from \"../../../database/firebase\";\r\n\r\n// import ProgressCircle from \"react-native-progress-circle\";\r\nimport { AnimatedCircularProgress } from \"react-native-circular-progress\";\r\n\r\nconst GeneralProfileScreen = (props) => {\r\n  console.warn(\"profile patient----------\", props.navigation.state)\r\n  let trainingPhase = \"\";\r\n  let activeWeek = \"\";\r\n  let activeDay = 0;\r\n  let width = \"\";\r\n  const [userInformation, setUserInformation]: any = useState({ loading: true });\r\n  let info: any = {};\r\n  console.warn(\"props---\",    props.navigation.state.params.uid);\r\n  const getInformation = async () => {\r\n    let patientIdentifier =  props.navigation.state.params.uid;\r\n    console.log(\r\n      \"{}{}{}{}P{}{}{}{}{}{}{}{}{}}el id del paciente que llegas es \",\r\n      patientIdentifier\r\n    );\r\n    await firebase.db\r\n      .collection(\"users\")\r\n      .doc(patientIdentifier)\r\n      .get()\r\n      .then((user: any) => {\r\n        info = user.data();\r\n        info[\"loading\"] = false;\r\n        console.log(\"La informaicon qudo asi ;\", info);\r\n      })\r\n      .catch((e) => {\r\n        // setLoading(false);\r\n      });\r\n\r\n    let record = await firebase.db\r\n      .collection(\"endRoutine\")\r\n      .where(\"uid\", \"==\", patientIdentifier)\r\n      .get();\r\n\r\n    info[\"record\"] = filterRecord(record);\r\n    console.log(\r\n      \"La informacion es :::::::::::: :::::::::::: :::::::::::: :::::::::::: ::::::::::::\",\r\n      info\r\n    );\r\n    setUserInformation(info);\r\n  };\r\n\r\n  const filterRecord = (collection) => {\r\n    let record: any = {};\r\n    collection.docs.forEach((doc, index) => {\r\n      console.warn(\r\n        \"Esta es la iteracion numerooooooooooooooooooooooooooooooooooooo\",\r\n        index,\r\n        record\r\n      );\r\n      let currentDocument = {\r\n        ...doc.data(),\r\n        id: doc.id,\r\n      };\r\n      let activeWeek = currentDocument.week;\r\n      let activeDay = currentDocument.day;\r\n      let trainingPhase = \"\";\r\n      if (parseInt(activeWeek.replace(\"week\", \"\"), 10) <= 3) {\r\n        trainingPhase = \"Fase Inicial\";\r\n      } else if (parseInt(activeWeek.replace(\"week\", \"\"), 10) <= 7) {\r\n        trainingPhase = \"Fase Intermedia\";\r\n      } else {\r\n        trainingPhase = \"Fase Avanzada\";\r\n      }\r\n      // Verificacion para saber si la fase existe\r\n      if (record[trainingPhase]) {\r\n        console.log(\r\n          \"Aqui la fase ya habia sido creada aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\r\n          record\r\n        );\r\n        //Verificacion si existe la semana\r\n        if (record[trainingPhase][activeWeek]) {\r\n          console.table(\"Aqui la semana 1 ya existia \", record);\r\n          //Verificacion si existe el dia\r\n          if (record[trainingPhase][activeWeek][activeDay] != 0) {\r\n            record[trainingPhase][activeWeek][activeDay].push({\r\n              ...currentDocument,\r\n            });\r\n          }\r\n          // Verificaccion si no existe el dia\r\n          else {\r\n            record[trainingPhase][activeWeek][activeDay] = [\r\n              { ...currentDocument },\r\n            ];\r\n          }\r\n        }\r\n        // Si no existe la semana\r\n        else {\r\n          console.log(\"La semana no existia \", record);\r\n          record[trainingPhase][activeWeek] = [0, 0, 0, 0, 0, 0, 0];\r\n          record[trainingPhase][activeWeek][activeDay] = [\r\n            { ...currentDocument },\r\n          ];\r\n        }\r\n      }\r\n      // si no existe la fase\r\n      else {\r\n        record[trainingPhase] = {};\r\n        record[trainingPhase][activeWeek] = [0, 0, 0, 0, 0, 0, 0];\r\n        record[trainingPhase][activeWeek][activeDay] = [{ ...currentDocument }];\r\n      }\r\n    });\r\n    console.log(\"======= El resuldato de la semana es :\", record);\r\n\r\n    return record;\r\n  };\r\n\r\n  props.user.information.role == \"paciente\" ? (width = \"42%\") : (width = \"84%\");\r\n  //console.log(\"rolee====\",props.props)\r\n \r\n    // console.log(props.activeDay)\r\n    trainingPhase = props.navigation.state.params.trainingPhase;\r\n    activeWeek = props.navigation.state.params.activeWeek;\r\n    activeDay = props.navigation.state.params.activeDay;\r\n \r\n  //console.log(\"weekkk----\",activeWeek)\r\n  if (\r\n    parseInt(activeWeek.replace(\"week\", \"\"), 10) == 1 &&\r\n    trainingPhase == \"Inicial\" &&\r\n    activeDay == 0\r\n  ) {\r\n    var trainingPhasePercentage = 0;\r\n    var activeWeekPercentage = 0;\r\n    var activeDayPercentage = 0;\r\n  } else {\r\n    var weekkk = String(parseInt(activeWeek.replace(\"week\", \"\")) - 1)\r\n    var activeWeekPercentage =\r\n      parseInt(weekkk, 10) * 10;\r\n      var activeDayPercentage = activeDay * 20;\r\n      console.warn(\"day---\", activeDay)\r\n    var trainingPhasePercentage =\r\n    parseInt(activeWeek.replace(\"week\", \"\")) > 4 ? 30 : parseInt(activeWeek.replace(\"week\", \"\")) > 7 ? 60 : parseInt(activeWeek.replace(\"week\", \"\")) > 9 ? 90 : 0;\r\n    \r\n  }\r\n  if (trainingPhasePercentage == 110) {\r\n    trainingPhasePercentage = 100;\r\n  }\r\n  if (activeWeekPercentage == 110) {\r\n    trainingPhasePercentage = 100;\r\n    activeWeekPercentage = 100;\r\n  }\r\n  if (activeDayPercentage == 110) {\r\n    activeDayPercentage = 100;\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.rowButtons}>\r\n        \r\n          <TouchableOpacity\r\n            onPress={() => props.navigation.navigate(\"PatientEvent\", {uid: props.navigation.state.params.uid})}\r\n            style={[\r\n              styles.button,\r\n              {\r\n                width: width,\r\n                backgroundColor: \"white\",\r\n                borderColor: \"#6979F8\",\r\n                borderWidth: vmin(0.3),\r\n              },\r\n            ]}\r\n          >\r\n            <ScalableText style={{ color: \"#6979F8\", fontWeight:\"bold\" }}>\r\n              Reportar Incidente\r\n            </ScalableText>\r\n          </TouchableOpacity>\r\n       \r\n      </View>\r\n\r\n      <TouchableOpacity\r\n        onPress={async () => {\r\n          const myPromise = new Promise((resolve, reject) => {\r\n            resolve(getInformation());\r\n          });\r\n\r\n          myPromise.then(() => {\r\n            console.warn(\"usring---\",info);\r\n\r\n            props.navigation.navigate(\"PatientHistory\", {\r\n              userInformation: info,\r\n            });\r\n          });\r\n        }}\r\n        style={styles.progressContainer}\r\n      >\r\n        <Text\r\n          style={{\r\n            fontSize: vmin(5),\r\n            fontWeight: \"bold\",\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          Control\r\n        </Text>\r\n        <Text\r\n          style={{\r\n            fontSize: vmin(3),\r\n            width: \"80%\",\r\n            textAlign: \"center\",\r\n            marginBottom: \"2%\",\r\n          }}\r\n        >\r\n          Los porcentajas se calculan automáticamente con base a su progreso en\r\n          el plan.\r\n        </Text>\r\n        <View style={styles.progressSection}>\r\n          <View style={styles.progressSection_texts}>\r\n            <Text style={{ fontSize: vmin(4), fontWeight: \"bold\" }}>\r\n              Plan de Ejercicios\r\n            </Text>\r\n            <Text\r\n              style={{ fontSize: vmin(3.5), color: \"rgba(153, 153, 153, 1)\" }}\r\n            >\r\n              Fase {trainingPhase}\r\n            </Text>\r\n          </View>\r\n          <View style={styles.progressSection_circle}>\r\n            <AnimatedCircularProgress\r\n              size={vmin(23)}\r\n              width={vmin(2)}\r\n              fill={trainingPhasePercentage}\r\n              tintColor=\"#6979F8\"\r\n              backgroundColor=\"rgba(228, 228, 228, 1)\"\r\n              rotation={0}\r\n            >\r\n              {(fill) => <Text>{trainingPhasePercentage}%</Text>}\r\n            </AnimatedCircularProgress>\r\n          </View>\r\n        </View>\r\n        <View style={styles.progressSection}>\r\n          <View style={styles.progressSection_texts}>\r\n            <Text style={{ fontSize: vmin(4), fontWeight: \"bold\" }}>\r\n              Semana del Plan\r\n            </Text>\r\n            <Text\r\n              style={{ fontSize: vmin(3.5), color: \"rgba(153, 153, 153, 1)\" }}\r\n            >\r\n              Semana {(activeWeekPercentage+10) / 10} de 10\r\n            </Text>\r\n          </View>\r\n          <View style={styles.progressSection_circle}>\r\n            <AnimatedCircularProgress\r\n              size={vmin(23)}\r\n              width={vmin(2)}\r\n              fill={activeWeekPercentage}\r\n              tintColor=\"#6979F8\"\r\n              backgroundColor=\"rgba(228, 228, 228, 1)\"\r\n              rotation={0}\r\n            >\r\n              {(fill) => <Text>{activeWeekPercentage}%</Text>}\r\n            </AnimatedCircularProgress>\r\n          </View>\r\n        </View>\r\n        <View style={styles.progressSection}>\r\n          <View style={styles.progressSection_texts}>\r\n            <Text style={{ fontSize: vmin(4), fontWeight: \"bold\" }}>\r\n              Dia de la Semana\r\n            </Text>\r\n            <Text\r\n              style={{ fontSize: vmin(3.5), color: \"rgba(153, 153, 153, 1)\" }}\r\n            >\r\n              Dia {(activeDayPercentage + 20 ) / 20} de 5\r\n            </Text>\r\n          </View>\r\n          <View style={styles.progressSection_circle}>\r\n            <AnimatedCircularProgress\r\n              size={vmin(23)}\r\n              width={vmin(2)}\r\n              fill={activeDayPercentage}\r\n              tintColor=\"#6979F8\"\r\n              backgroundColor=\"rgba(228, 228, 228, 1)\"\r\n              rotation={0}\r\n            >\r\n              {(fill) => <Text>{activeDayPercentage}%</Text>}\r\n            </AnimatedCircularProgress>\r\n          </View>\r\n        </View>\r\n      </TouchableOpacity>\r\n\r\n      {props.user.information.role == \"paciente\" ? (\r\n        <View style={styles.footerButtons}>\r\n          <TouchableOpacity\r\n            style={styles.button2}\r\n            onPress={() => props.navigation.navigate(\"ScheduleRoutines\")}\r\n          >\r\n            <ScalableText style={{ color: \"white\" , fontWeight:\"bold\"}}>\r\n              Configurar alarmas de la rutina semanal\r\n            </ScalableText>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity\r\n            style={styles.button2}\r\n            onPress={() =>\r\n              props.props.navigation.navigate(\"CustomizeRoutine\", {\r\n                btnText: \"Guardar\",\r\n              })\r\n            }\r\n          >\r\n            <ScalableText style={{ color: \"white\", fontWeight:\"bold\" }}>\r\n              Editar intensidad y tiempo de reposo\r\n            </ScalableText>\r\n          </TouchableOpacity>\r\n        </View>\r\n      ) : (\r\n        console.log(\"gfd\")\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst MapStateToProps = (store: MyTypes.ReducerState) => {\r\n  console.warn(\"storeee---\", store.DownloadReducer.ExerciseRoutineIndentifiers);\r\n  return {\r\n    user: store.User.user,\r\n    connection: store.User.connection,\r\n    donwloaded: store.DownloadReducer.ExerciseRoutineIndentifiers,\r\n  };\r\n};\r\n\r\nconst MapDispatchToProps = (dispatch: Dispatch, store: any) => ({\r\n  setUser: (val) => dispatch(actionsUser.SET_USER(val)),\r\n});\r\nexport default connect(\r\n  MapStateToProps,\r\n  MapDispatchToProps\r\n)(GeneralProfileScreen);\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    maxWidth: wp(\"100%\"),\r\n    maxHeight: hp(\"100%\"),\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"white\",\r\n  },\r\n\r\n  rowButtons: {\r\n    width: \"100%\",\r\n    height: \"10%\",\r\n    marginTop: \"3%\",\r\n    justifyContent: \"space-evenly\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n    // backgroundColor: \"pink\",\r\n  },\r\n\r\n  button: {\r\n    width: \"42%\",\r\n    height: \"90%\",\r\n    backgroundColor: \"#6979F8\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 5,\r\n  },\r\n\r\n  button2: {\r\n    width: \"90%\",\r\n    height: \"40%\",\r\n    marginBottom: \"4%\",\r\n    backgroundColor: \"#6979F8\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 5,\r\n  },\r\n\r\n  containerHeader: {\r\n    width: \"100%\",\r\n    height: \"10%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    // backgroundColor: \"orange\",\r\n  },\r\n\r\n  progressContainer: {\r\n    width: \"95%\",\r\n    height: \"85%\",\r\n    justifyContent: \"space-evenly\",\r\n    alignItems: \"center\",\r\n    marginTop: \"3%\",\r\n    borderRadius: 10,\r\n    backgroundColor: \"rgba(93,93,93,0.1)\",\r\n  },\r\n  footerButtons: {\r\n    width: \"100%\",\r\n    height: \"20%\",\r\n    marginTop: \"4%\",\r\n    justifyContent: \"space-evenly\",\r\n    alignItems: \"center\",\r\n    // backgroundColor: \"salmon\",\r\n  },\r\n  containerButton: {\r\n    height: \"10%\",\r\n    width: \"100%\",\r\n    // backgroundColor: \"red\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: vmin(2),\r\n  },\r\n\r\n  progressSection: {\r\n    width: \"90%\",\r\n    height: \"24%\",\r\n    backgroundColor: \"white\",\r\n    marginBottom: \"2%\",\r\n    borderRadius: 10,\r\n    flexDirection: \"row\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 7,\r\n    },\r\n    shadowOpacity: 0.41,\r\n    shadowRadius: 9.11,\r\n    elevation: 14,\r\n  },\r\n\r\n  progressSection_texts: {\r\n    height: \"100%\",\r\n    width: \"65%\",\r\n    justifyContent: \"space-evenly\",\r\n    paddingLeft: \"5%\",\r\n  },\r\n\r\n  progressSection_circle: {\r\n    height: \"100%\",\r\n    width: \"35%\",\r\n    marginBottom: \"5%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    // backgroundColor: \"peru\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}